# ğŸ Manna Church Website â€” ìµœì¢… ë°°í¬ ê°ì‚¬ ë³´ê³ ì„œ

> **ê°ì‚¬ì:** Vercel Principal Tech Lead (AI Auditor)
> **ëŒ€ìƒ:** `apps/web` (Next.js 16.1.1)
> **ê°ì‚¬ì¼:** 2025-02-11
> **ìƒíƒœ:** ğŸŸ¡ ì¡°ê±´ë¶€ ë°°í¬ ìŠ¹ì¸ (Go with Minor Fixes)

---

## ê¸°ìˆ  ìŠ¤íƒ ìš”ì•½

| í•­ëª©           | ë²„ì „                                      |
| -------------- | ----------------------------------------- |
| Next.js        | 16.1.1 (Turbopack, PPR, Cache Components) |
| React          | 19.2.3                                    |
| TypeScript     | 5.9.3 (`strict: true`)                    |
| React Compiler | 1.0.0 (babel-plugin)                      |
| Sentry         | 10.36.0 (`@sentry/nextjs`)                |
| Tailwind CSS   | 4.1.18                                    |
| ESLint         | 9.39.1 (Flat Config)                      |
| íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €  | pnpm (Turborepo ëª¨ë…¸ë ˆí¬)                 |

---

## 1. ğŸ’» ë¹Œë“œ ë° íƒ€ì… ë¬´ê²°ì„± ê²€ì‚¬

### 1-1. `pnpm build` (í”„ë¡œë•ì…˜ ë¹Œë“œ)

```
âœ… ê²°ê³¼: ì„±ê³µ (Exit code 0)

â–² Next.js 16.1.1 (Turbopack, Cache Components)
âœ“ Compiled successfully in 6.7s
âœ“ Generating static pages (42/42) in 1240.9ms
```

**ë¹Œë“œ ì¶œë ¥ ë¶„ì„:**

| ë¼ìš°íŠ¸ ìœ í˜•               | ê°œìˆ˜                 | ì„¤ëª…                           |
| ------------------------- | -------------------- | ------------------------------ |
| â—‹ Static                  | ë‹¤ìˆ˜                 | ì •ì  HTMLë¡œ ì‚¬ì „ ë Œë”ë§        |
| â— Partial Prerender (PPR) | 8ê°œ                  | ì •ì  HTML + ë™ì  ì„œë²„ ìŠ¤íŠ¸ë¦¬ë° |
| Æ’ Dynamic                 | 1ê°œ (`/sitemap.xml`) | ìš”ì²­ ì‹œ ì„œë²„ ë Œë”ë§            |

- **PPR (Partial Prerendering)** ì´ ì˜¬ë°”ë¥´ê²Œ í™œì„±í™”ë˜ì–´ ìˆìœ¼ë©°, ë™ì  ë¼ìš°íŠ¸(`[id]`, `[date]`)ì—ì„œ ì •ì  ì…¸ + ë™ì  ìŠ¤íŠ¸ë¦¬ë°ì´ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤.
- **Revalidate/Expire** ì„¤ì •ì´ ë¼ìš°íŠ¸ë³„ë¡œ ì ì ˆíˆ ë¶„ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤:
  - í™ˆ(`/`): 1ì‹œê°„ revalidate, 1ì¼ expire
  - ê³µì§€/ì´ë²¤íŠ¸/ê°¤ëŸ¬ë¦¬ ìƒì„¸: 1ì¼ revalidate, 1ì£¼ expire
  - ì£¼ë³´ ìƒì„¸: 1ì‹œê°„ revalidate, 1ì¼ expire

**íŒì •: âœ… PASS â€” ë¹Œë“œ ë¬´ê²°ì„± í™•ì¸**

---

### 1-2. `tsc --noEmit` (íƒ€ì… ê²€ì‚¬)

```
âœ… ê²°ê³¼: ì„±ê³µ (Exit code 0, ì—ëŸ¬ 0ê±´)
```

**TypeScript ì„¤ì • ë¶„ì„:**

- `strict: true` âœ…
- `noUncheckedIndexedAccess: true` âœ… (ë°°ì—´/ê°ì²´ ì¸ë±ìŠ¤ ì ‘ê·¼ ì‹œ `undefined` ì²´í¬ ê°•ì œ)
- `isolatedModules: true` âœ…
- `moduleResolution: "Bundler"` âœ… (Next.js 16 ê¶Œì¥)
- `any` íƒ€ì… ì‚¬ìš© **0ê±´** â€” ì „ì²´ ì½”ë“œë² ì´ìŠ¤ì—ì„œ `any` íƒ€ì…ì´ ë°œê²¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

**íŒì •: âœ… PASS â€” íƒ€ì… ì•ˆì „ì„± í™•ì¸**

---

### 1-3. `pnpm lint` (ESLint ê²€ì‚¬)

```
âœ… ê²°ê³¼: ì„±ê³µ (Exit code 0, ê²½ê³  0ê±´)
```

- `--max-warnings 0` ì˜µì…˜ìœ¼ë¡œ ê²½ê³ ë„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” ì—„ê²©í•œ ì •ì±…ì´ ì ìš©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
- ESLint 9 Flat Config ì‚¬ìš© (`eslint.config.mjs`)
- `@repo/eslint-config/next-js` ê³µìœ  ì„¤ì • í™œìš©

**íŒì •: âœ… PASS â€” ë¦°íŠ¸ ë¬´ê²°ì„± í™•ì¸**

---

## 2. ğŸ“¦ ì„¤ì • ë° ì˜ì¡´ì„± ë¶„ì„

### 2-1. `package.json` ì˜ì¡´ì„± í˜¸í™˜ì„±

| ê²€ì‚¬ í•­ëª©                   | ê²°ê³¼ | ìƒì„¸                                                        |
| --------------------------- | ---- | ----------------------------------------------------------- |
| Next.js â†” React í˜¸í™˜        | âœ…   | Next.js 16.1.1ì€ React 19.xë¥¼ ìš”êµ¬í•˜ë©°, React 19.2.3 ì„¤ì¹˜ë¨ |
| React â†” React DOM ë²„ì „ ì¼ì¹˜ | âœ…   | ë‘˜ ë‹¤ 19.2.3ìœ¼ë¡œ ë™ì¼                                       |
| @types/react ë²„ì „ ì¼ì¹˜      | âœ…   | `@types/react: 19.2.3` = `react: 19.2.3`                    |
| React Compiler í˜¸í™˜         | âœ…   | `babel-plugin-react-compiler: 1.0.0`ì€ React 19ì™€ í˜¸í™˜      |
| Sentry SDK í˜¸í™˜             | âœ…   | `@sentry/nextjs: 10.36.0`ì€ Next.js 16 ì§€ì›                 |

**ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„±:** ì—†ìŒ
**ëˆ„ë½ëœ ì˜ì¡´ì„±:** ì—†ìŒ
**ë²„ì „ ì¶©ëŒ:** ì—†ìŒ

---

### 2-2. `next.config.ts` ë¶„ì„

```typescript
// ì£¼ìš” ì„¤ì •
reactCompiler: true,      // âœ… React Compiler í™œì„±í™”
cacheComponents: true,     // âœ… Next.js 16 ì»´í¬ë„ŒíŠ¸ ìºì‹±
```

| ì„¤ì • í•­ëª©                             | ìƒíƒœ | ë¹„ê³                                    |
| ------------------------------------- | ---- | -------------------------------------- |
| `reactCompiler`                       | âœ…   | ìë™ ë©”ëª¨ì´ì œì´ì…˜ìœ¼ë¡œ ë¦¬ë Œë”ë§ ìµœì í™”  |
| `cacheComponents`                     | âœ…   | ì„œë²„ ì»´í¬ë„ŒíŠ¸ ìºì‹± (Next.js 16 ì‹ ê¸°ëŠ¥) |
| `images.remotePatterns`               | âœ…   | Supabase Storage ë„ë©”ì¸ë§Œ í—ˆìš©         |
| Sentry `withSentryConfig`             | âœ…   | ì†ŒìŠ¤ë§µ ì—…ë¡œë“œ, ìë™ ëª¨ë‹ˆí„°ë§ ì„¤ì •      |
| Sentry `treeshake.removeDebugLogging` | âœ…   | í”„ë¡œë•ì…˜ ë²ˆë“¤ì—ì„œ ë””ë²„ê·¸ ë¡œê·¸ ì œê±°     |

**âš ï¸ ì£¼ì˜ ì‚¬í•­:**

- `widenClientFileUpload: true` â€” ì†ŒìŠ¤ë§µ ì—…ë¡œë“œ ë²”ìœ„ê°€ í™•ëŒ€ë˜ì–´ ë¹Œë“œ ì‹œê°„ì´ ì•½ê°„ ì¦ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜„ì¬ ë¹Œë“œê°€ 6.7së¡œ ë¹ ë¥´ë¯€ë¡œ ë¬¸ì œì—†ìŠµë‹ˆë‹¤.

---

### 2-3. `tsconfig.json` ë¶„ì„

```
extends: @repo/typescript-config/nextjs.json
  â””â”€â”€ extends: ./base.json
```

**ìƒì† ì²´ì¸ ìµœì¢… ì„¤ì •:**

| ì˜µì…˜                       | ê°’          | í‰ê°€                         |
| -------------------------- | ----------- | ---------------------------- |
| `strict`                   | `true`      | âœ… í•„ìˆ˜                      |
| `noUncheckedIndexedAccess` | `true`      | âœ… ìš°ìˆ˜ (ëŸ°íƒ€ì„ ì•ˆì „ì„± í–¥ìƒ) |
| `isolatedModules`          | `true`      | âœ… Turbopack í˜¸í™˜            |
| `moduleResolution`         | `"Bundler"` | âœ… Next.js 16 ê¶Œì¥           |
| `target`                   | `"ES2022"`  | âœ… ëª¨ë˜ JS                   |
| `skipLibCheck`             | `true`      | âœ… ë¹Œë“œ ì†ë„ ìµœì í™”          |
| `paths: @/*`               | `./src/*`   | âœ… ê²½ë¡œ ë³„ì¹­                 |

**íŒì •: âœ… PASS â€” ëª¨ë“  ì˜ì¡´ì„± ë° ì„¤ì • ì •ìƒ**

---

### 2-4. ëª¨ë…¸ë ˆí¬ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ íŒ¨í‚¤ì§€

| íŒ¨í‚¤ì§€                    | ìš©ë„                              |
| ------------------------- | --------------------------------- |
| `@repo/database`          | Supabase í´ë¼ì´ì–¸íŠ¸ ë° DB ì¿¼ë¦¬    |
| `@repo/ui`                | ê³µìœ  UI ì»´í¬ë„ŒíŠ¸ (shadcn/ui ê¸°ë°˜) |
| `@repo/typescript-config` | TypeScript ê³µìœ  ì„¤ì •              |
| `@repo/eslint-config`     | ESLint ê³µìœ  ì„¤ì •                  |
| `@repo/tailwind-config`   | Tailwind CSS ê³µìœ  ì„¤ì •            |

ëª¨ë“  ì›Œí¬ìŠ¤í˜ì´ìŠ¤ íŒ¨í‚¤ì§€ê°€ `workspace:*`ë¡œ ì˜¬ë°”ë¥´ê²Œ ì°¸ì¡°ë˜ê³  ìˆìŠµë‹ˆë‹¤.

---

### 2-5. íŒŒì¼ëª… ì˜¤íƒ€ (Minor)

| íŒŒì¼                                           | ë¬¸ì œ              | ê¶Œì¥                            |
| ---------------------------------------------- | ----------------- | ------------------------------- |
| `src/shared/ui/components/ReadMoreButtion.tsx` | "Buttion" ì˜¤íƒ€    | `ReadMoreButton.tsx`ë¡œ ë¦¬ë„¤ì´ë° |
| `src/shared/ui/components/PagenationBar.tsx`   | "Pagenation" ì˜¤íƒ€ | `PaginationBar.tsx`ë¡œ ë¦¬ë„¤ì´ë°  |

> export ì´ë¦„ì€ ì˜¬ë°”ë¥´ê²Œ `ReadMoreButton`, `PaginationBar`ë¡œ ë˜ì–´ ìˆìœ¼ë¯€ë¡œ **ì™¸ë¶€ APIì—ëŠ” ì˜í–¥ ì—†ìŒ**. ë‚´ë¶€ ì½”ë“œ í’ˆì§ˆ ì°¨ì›ì˜ ê°œì„  ì‚¬í•­ì…ë‹ˆë‹¤.

---

## Part 1 ìš”ì•½

| ì„¹ì…˜            | íŒì •     | ì‹¬ê°ë„ |
| --------------- | -------- | ------ |
| í”„ë¡œë•ì…˜ ë¹Œë“œ   | âœ… PASS  | â€”      |
| íƒ€ì… ê²€ì‚¬       | âœ… PASS  | â€”      |
| ESLint ê²€ì‚¬     | âœ… PASS  | â€”      |
| ì˜ì¡´ì„± í˜¸í™˜ì„±   | âœ… PASS  | â€”      |
| Next.js ì„¤ì •    | âœ… PASS  | â€”      |
| TypeScript ì„¤ì • | âœ… PASS  | â€”      |
| íŒŒì¼ëª… ì˜¤íƒ€     | âš ï¸ MINOR | Low    |

> **Part 1 ê²°ë¡ :** ë¹Œë“œ íŒŒì´í”„ë¼ì¸ê³¼ ì„¤ì • ì¸í”„ë¼ëŠ” **í”„ë¡œë•ì…˜ ë°°í¬ì— ì í•©í•œ ìƒíƒœ**ì…ë‹ˆë‹¤.
> Next.js 16ì˜ ìµœì‹  ê¸°ëŠ¥(PPR, React Compiler, Cache Components)ì„ ì ê·¹ í™œìš©í•˜ê³  ìˆìœ¼ë©°,
> TypeScript strict ëª¨ë“œì™€ `any` íƒ€ì… ì œë¡œ ì •ì±…ì€ ë§¤ìš° ìš°ìˆ˜í•©ë‹ˆë‹¤.

---

## 3. ğŸ›¡ï¸ ë³´ì•ˆ ë° í™˜ê²½ ë³€ìˆ˜ ê²€ì‚¬

### 3-1. í•˜ë“œì½”ë”©ëœ ì‹œí¬ë¦¿/í‚¤ ê²€ì‚¬

| ê²€ì‚¬ í•­ëª©                   | ê²°ê³¼    | ìƒì„¸                                                                    |
| --------------------------- | ------- | ----------------------------------------------------------------------- |
| API Key / Secret / Password | âœ… ì—†ìŒ | ì½”ë“œ ì „ì²´ì—ì„œ í•˜ë“œì½”ë”©ëœ ì‹œí¬ë¦¿ ë¯¸ë°œê²¬                                  |
| í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©              | âœ…      | `NEXT_PUBLIC_NAVER_MAP_CLIENT_ID`ë§Œ í´ë¼ì´ì–¸íŠ¸ ë…¸ì¶œ (ê³µê°œ API í‚¤, ì •ìƒ) |
| `.env.local` gitignore      | âœ…      | `.gitignore`ì— `.env*` íŒ¨í„´ í¬í•¨                                        |

**Sentry DSN ê´€ë ¨:**

- `instrumentation-client.ts`, `sentry.server.config.ts`, `sentry.edge.config.ts`ì— Sentry DSNì´ í•˜ë“œì½”ë”©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
- Sentry DSNì€ **ì„¤ê³„ìƒ ê³µê°œ ê°€ëŠ¥í•œ ê°’**ì´ë¯€ë¡œ ë³´ì•ˆ ìœ„í˜‘ì€ ì•„ë‹™ë‹ˆë‹¤ (Sentry ê³µì‹ ë¬¸ì„œ í™•ì¸).
- ë‹¤ë§Œ, í™˜ê²½ ë³€ìˆ˜(`SENTRY_DSN`)ë¡œ ê´€ë¦¬í•˜ë©´ í™˜ê²½ë³„ ë¶„ë¦¬ê°€ ë” ìš©ì´í•©ë‹ˆë‹¤.

**íŒì •: âœ… PASS**

---

### 3-2. `dangerouslySetInnerHTML` ê²€ì‚¬

**ë°œê²¬ ìœ„ì¹˜:** `src/app/layout.tsx:87` (1ê±´)

```tsx
<Script
  id="json-ld-schema"
  type="application/ld+json"
  strategy="afterInteractive"
  dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}
/>
```

**ë¶„ì„:**

- âœ… `JSON.stringify()`ë¡œ ì§ë ¬í™”ëœ ì œì–´ëœ ë°ì´í„°ë§Œ ì‚¬ìš© â†’ **XSS ìœ„í—˜ ì—†ìŒ**
- âœ… ë°ì´í„° ì†ŒìŠ¤ê°€ `churchData` (ì •ì  ìƒìˆ˜) â†’ ì‚¬ìš©ì ì…ë ¥ ì•„ë‹˜
- âš ï¸ **ê°œì„  ì œì•ˆ:** `strategy="afterInteractive"`ëŠ” JSON-LDë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì£¼ì…í•©ë‹ˆë‹¤.
  ê²€ìƒ‰ì—”ì§„ í¬ë¡¤ëŸ¬ê°€ JavaScriptë¥¼ ì‹¤í–‰í•˜ì§€ ì•Šì„ ê²½ìš° JSON-LDë¥¼ ì¸ì‹í•˜ì§€ ëª»í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  `<script>` íƒœê·¸ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ë©´ ì´ˆê¸° HTMLì— í¬í•¨ë˜ì–´ SEOì— ë” ìœ ë¦¬í•©ë‹ˆë‹¤.

**ê¶Œì¥ ìˆ˜ì •:**

```tsx
// í˜„ì¬: next/script (í´ë¼ì´ì–¸íŠ¸ ì£¼ì…)
<Script strategy="afterInteractive" dangerouslySetInnerHTML={...} />

// ê¶Œì¥: ë„¤ì´í‹°ë¸Œ <script> (ì„œë²„ ë Œë”ë§ HTMLì— í¬í•¨)
<script
  type="application/ld+json"
  dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}
/>
```

**íŒì •: âœ… PASS (XSS ì•ˆì „) / âš ï¸ SEO ê°œì„  ê¶Œì¥**

---

### 3-3. Server Actions ë³´ì•ˆ ê²€ì‚¬

```
'use server' ì„ ì–¸ íŒŒì¼: 0ê±´
```

- ì´ í”„ë¡œì íŠ¸ëŠ” Server Actionsë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©°, ë°ì´í„°ëŠ” ëª¨ë‘ `'use cache'` + `React.cache()` íŒ¨í„´ìœ¼ë¡œ ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì§ì ‘ fetchí•©ë‹ˆë‹¤.
- ì¸ì¦ì´ í•„ìš”í•œ ê³µê°œ API ì—”ë“œí¬ì¸íŠ¸ê°€ ì—†ìœ¼ë¯€ë¡œ, í˜„ ë‹¨ê³„ì—ì„œ Server Actions ë³´ì•ˆ ì´ìŠˆëŠ” í•´ë‹¹ ì—†ìŠµë‹ˆë‹¤.

**íŒì •: âœ… PASS (í•´ë‹¹ ì—†ìŒ)**

---

### 3-4. Sentry ì„¤ì • ë³´ì•ˆ ê²€í† 

| í•­ëª©                       | ê°’           | ìœ„í—˜ë„    | ë¹„ê³                                                                          |
| -------------------------- | ------------ | --------- | ---------------------------------------------------------------------------- |
| `tracesSampleRate`         | `1` (100%)   | âš ï¸ MEDIUM | í”„ë¡œë•ì…˜ì—ì„œ 100% íŠ¸ë ˆì´ìŠ¤ëŠ” ë¹„ìš© ì¦ê°€ ìœ ë°œ. `0.1`~`0.3` ê¶Œì¥                |
| `sendDefaultPii`           | `true`       | âš ï¸ MEDIUM | ì‚¬ìš©ì IP, ì¿ í‚¤ ë“± ê°œì¸ì •ë³´ê°€ Sentryë¡œ ì „ì†¡ë¨. ê°œì¸ì •ë³´ë³´í˜¸ë²• ì¤€ìˆ˜ í™•ì¸ í•„ìš” |
| `replaysSessionSampleRate` | `0.1` (10%)  | âœ…        | ì ì ˆí•œ ë¹„ìœ¨                                                                  |
| `replaysOnErrorSampleRate` | `1.0` (100%) | âœ…        | ì—ëŸ¬ ë°œìƒ ì‹œ 100% ë¦¬í”Œë ˆì´ëŠ” ì ì ˆ                                            |

**ê¶Œì¥ ì¡°ì¹˜:**

1. `tracesSampleRate`ë¥¼ í”„ë¡œë•ì…˜ì—ì„œ `0.2` ì´í•˜ë¡œ ì¡°ì •
2. `sendDefaultPii`ë¥¼ êµíšŒ ì›¹ì‚¬ì´íŠ¸ íŠ¹ì„±ìƒ `false`ë¡œ ë³€ê²½ ê²€í†  (ë°©ë¬¸ì ê°œì¸ì •ë³´ ë³´í˜¸)

---

### 3-5. Supabase ì¿¼ë¦¬ ì¸ì ì…˜ ê²€ì‚¬

**ë°œê²¬ëœ íŒ¨í„´:**

```typescript
// entities/announcement/api/queries.ts:40
queryBuilder.or(`title.ilike.%${query}%,content.ilike.%${query}%`);

// entities/event/api/queries.ts:39
queryBuilder.or(`title.ilike.%${query}%,description.ilike.%${query}%`);

// entities/gallery/api/queries.ts:38
queryBuilder.ilike('title', `%${query}%`);
```

**ë¶„ì„:**

- Supabaseì˜ PostgREST APIëŠ” ë‚´ë¶€ì ìœ¼ë¡œ íŒŒë¼ë¯¸í„°í™”ëœ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ, `.ilike()` ë©”ì„œë“œëŠ” SQL ì¸ì ì…˜ì— ì•ˆì „í•©ë‹ˆë‹¤.
- ê·¸ëŸ¬ë‚˜ `.or()` ë©”ì„œë“œì—ì„œ ë¬¸ìì—´ ë³´ê°„(`${query}`)ì„ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´ì€ **PostgREST í•„í„° ì¸ì ì…˜**ì— ì·¨ì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - ì˜ˆ: `query` ê°’ì— `,` ë˜ëŠ” `.` ê°™ì€ PostgREST ì—°ì‚°ìê°€ í¬í•¨ë˜ë©´ ì˜ë„ì¹˜ ì•Šì€ í•„í„°ê°€ ì¶”ê°€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ìœ„í—˜ë„:** ğŸŸ¡ LOW (ì½ê¸° ì „ìš© ê³µê°œ ë°ì´í„°ì´ë¯€ë¡œ ì‹¤ì§ˆì  ìœ„í—˜ì€ ë‚®ìŒ)

**ê¶Œì¥ ì¡°ì¹˜:** `query` ê°’ì„ sanitizeí•˜ê±°ë‚˜, `.or()` ëŒ€ì‹  ê°œë³„ `.ilike()` ì¡°ê±´ì„ ì¡°í•©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½

---

## 4. ğŸ—ï¸ ì•„í‚¤í…ì²˜ ë° FSD ìœ„ë°˜ ê²€ì‚¬

### 4-1. FSD (Feature-Sliced Design) ë ˆì´ì–´ êµ¬ì¡°

```
src/
â”œâ”€â”€ app/           â† ë¼ìš°íŒ… & í˜ì´ì§€ (ì§„ì…ì )
â”œâ”€â”€ widgets/       â† ë…ë¦½ì  UI ë¸”ë¡ (13ê°œ ìœ„ì ¯)
â”œâ”€â”€ features/      â† ì‚¬ìš©ì ì¸í„°ë™ì…˜ ê¸°ëŠ¥ (âš ï¸ ë¹„ì–´ìˆìŒ)
â”œâ”€â”€ entities/      â† ë¹„ì¦ˆë‹ˆìŠ¤ ì—”í‹°í‹° (8ê°œ)
â””â”€â”€ shared/        â† ê³µìœ  ìœ í‹¸ë¦¬í‹°, UI, ì„¤ì •
```

**ë ˆì´ì–´ ì˜ì¡´ì„± ê·œì¹™:** `app â†’ widgets â†’ features â†’ entities â†’ shared`

### 4-2. ìˆœí™˜ ì˜ì¡´ì„± ê²€ì‚¬

| ê²€ì‚¬                                  | ê²°ê³¼    |
| ------------------------------------- | ------- |
| `entities` â†’ `widgets` ì°¸ì¡°           | âœ… ì—†ìŒ |
| `entities` â†’ `features` ì°¸ì¡°          | âœ… ì—†ìŒ |
| `entities` â†’ `entities` (í¬ë¡œìŠ¤) ì°¸ì¡° | âœ… ì—†ìŒ |
| `widgets` â†’ `features` ì°¸ì¡°           | âœ… ì—†ìŒ |

**íŒì •: âœ… PASS â€” ìˆœí™˜ ì˜ì¡´ì„± ì—†ìŒ**

---

### 4-3. ì—”í‹°í‹° ìˆœìˆ˜ì„± ê²€ì‚¬

ëª¨ë“  ì—”í‹°í‹° ëª¨ë“ˆì´ ë™ì¼í•œ í´ë¦° íŒ¨í„´ì„ ë”°ë¥´ê³  ìˆìŠµë‹ˆë‹¤:

```
entities/<name>/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ queries.ts   â† 'use cache' + React.cache() ë°ì´í„° íŒ¨ì¹­
â”‚   â””â”€â”€ mapper.ts    â† DB ë¡œìš° â†’ ë„ë©”ì¸ ëª¨ë¸ ë³€í™˜
â”œâ”€â”€ model/
â”‚   â””â”€â”€ <name>.ts    â† TypeScript ì¸í„°í˜ì´ìŠ¤ (ìˆœìˆ˜ íƒ€ì…)
â””â”€â”€ index.ts         â† Public API (ë°°ëŸ´ íŒŒì¼)
```

- âœ… ëª¨ë“  ì—”í‹°í‹°ê°€ `shared` ë ˆì´ì–´ë§Œ ì°¸ì¡°
- âœ… UI ì˜ì¡´ì„± ì—†ìŒ (React ì»´í¬ë„ŒíŠ¸ ë¯¸í¬í•¨)
- âœ… ë°ì´í„° ë§¤í•‘ ë¡œì§ì´ `mapper.ts`ë¡œ ë¶„ë¦¬

**íŒì •: âœ… PASS â€” ì—”í‹°í‹° ìˆœìˆ˜ì„± í™•ì¸**

---

### 4-4. ë°°ëŸ´ íŒŒì¼ ìš°íšŒ ì„í¬íŠ¸ (FSD ìœ„ë°˜)

**ìœ„ë°˜ ë°œê²¬: 4ê±´**

ì¼ë¶€ ìœ„ì ¯ì´ ì—”í‹°í‹°ì˜ ë‚´ë¶€ ê²½ë¡œ(`/api/queries`)ë¥¼ ì§ì ‘ ì°¸ì¡°í•˜ê³  ìˆìŠµë‹ˆë‹¤:

| íŒŒì¼                                           | ì„í¬íŠ¸ ê²½ë¡œ                           | ê¶Œì¥                      |
| ---------------------------------------------- | ------------------------------------- | ------------------------- |
| `widgets/announcements-section/ui/List.tsx`    | `@/entities/announcement/api/queries` | `@/entities/announcement` |
| `widgets/announcements-section/ui/Section.tsx` | `@/entities/announcement/api/queries` | `@/entities/announcement` |
| `widgets/events-section/ui/List.tsx`           | `@/entities/event/api/queries`        | `@/entities/event`        |
| `widgets/gallery-section/ui/List.tsx`          | `@/entities/gallery/api/queries`      | `@/entities/gallery`      |

**ì˜í–¥ë„:** ğŸŸ¡ LOW â€” ê¸°ëŠ¥ì ìœ¼ë¡œëŠ” ë¬¸ì œì—†ìœ¼ë‚˜, FSD ì›ì¹™ì—ì„œ ì—”í‹°í‹°ì˜ ë°°ëŸ´ íŒŒì¼(`index.ts`)ì„ í†µí•´ì„œë§Œ ì ‘ê·¼í•´ì•¼ í•©ë‹ˆë‹¤.
ë‚´ë¶€ ê²½ë¡œ ì§ì ‘ ì°¸ì¡°ëŠ” í–¥í›„ ë¦¬íŒ©í† ë§ ì‹œ ê¹¨ì§€ê¸° ì‰½ìŠµë‹ˆë‹¤.

**ê¶Œì¥:** í•´ë‹¹ í•¨ìˆ˜ë“¤ì´ ì´ë¯¸ `index.ts`ì—ì„œ exportë˜ê³  ìˆìœ¼ë¯€ë¡œ, ì„í¬íŠ¸ ê²½ë¡œë§Œ ë³€ê²½í•˜ë©´ ë©ë‹ˆë‹¤.

---

### 4-5. `features` ë ˆì´ì–´ ìƒíƒœ

```
src/features/
â””â”€â”€ test.txt (ë¹ˆ íŒŒì¼)
```

- í˜„ì¬ `features` ë ˆì´ì–´ê°€ ì‚¬ì‹¤ìƒ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.
- ì´ í”„ë¡œì íŠ¸ëŠ” ì½ê¸° ì „ìš© ì½˜í…ì¸  ì›¹ì‚¬ì´íŠ¸ë¡œ, ë³µì¡í•œ ì‚¬ìš©ì ì¸í„°ë™ì…˜ ê¸°ëŠ¥ì´ ì—†ìœ¼ë¯€ë¡œ **í˜„ ë‹¨ê³„ì—ì„œëŠ” í•©ë¦¬ì **ì…ë‹ˆë‹¤.
- í–¥í›„ ê²€ìƒ‰ í•„í„°, í¼ ì œì¶œ, ì¢‹ì•„ìš” ë“± ì‚¬ìš©ì ì•¡ì…˜ì´ ì¶”ê°€ë  ë•Œ ì´ ë ˆì´ì–´ë¥¼ í™œìš©í•˜ë©´ ë©ë‹ˆë‹¤.
- `test.txt` íŒŒì¼ì€ ë°°í¬ ì „ ì‚­ì œí•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

---

## 5. âš¡ ì„±ëŠ¥ ë° Web Vitals ë¶„ì„

### 5-1. Blocking SSR íŒ¨í„´ ê²€ì‚¬

**Root Layout (`src/app/layout.tsx`):**

- âœ… ë™ê¸° í•¨ìˆ˜ â€” `await` ì—†ìŒ, ë¸”ë¡œí‚¹ ì—†ìŒ

**Main Layout (`src/app/(main)/layout.tsx`):**

- âœ… ë™ê¸° í•¨ìˆ˜ â€” `await` ì—†ìŒ, ë¸”ë¡œí‚¹ ì—†ìŒ

**Content Layout (`src/app/(main)/(content)/layout.tsx`):**

- âœ… ë™ê¸° í•¨ìˆ˜ â€” `await` ì—†ìŒ, ë¸”ë¡œí‚¹ ì—†ìŒ

**í™ˆ í˜ì´ì§€ (`src/app/(main)/page.tsx`):**

- âœ… `async function Home()` ì´ì§€ë§Œ ì§ì ‘ `await` ì—†ìŒ
- âœ… ëª¨ë“  ë°ì´í„° íŒ¨ì¹­ ìœ„ì ¯ì´ `withAsyncBoundary`ë¡œ ë˜í•‘ â†’ Suspense ê¸°ë°˜ ìŠ¤íŠ¸ë¦¬ë°

**íŒì •: âœ… PASS â€” ë¸”ë¡œí‚¹ SSR íŒ¨í„´ ì—†ìŒ**

---

### 5-2. `withAsyncBoundary` HOC íŒ¨í„´ ë¶„ì„

```typescript
// src/shared/ui/utils/withAsyncBoundary.tsx
export function withAsyncBoundary<T>(Component, options) {
  // 1. try/catchë¡œ ì—ëŸ¬ í¬ì°© (ì„œë²„ ì»´í¬ë„ŒíŠ¸ìš© ErrorBoundary)
  // 2. Suspenseë¡œ ë¡œë”© ìƒíƒœ ì²˜ë¦¬
  // 3. Sentryì— ì—ëŸ¬ ë³´ê³ 
  // 4. Next.js ë‚´ë¶€ ì—ëŸ¬(NEXT_*)ëŠ” re-throw
}
```

**Vercel Best Practices ì¤€ìˆ˜ ì—¬ë¶€:**

- âœ… `async-suspense-boundaries` (1.5) â€” ì „ëµì  Suspense ê²½ê³„ ì‚¬ìš©
- âœ… ëª¨ë“  ë¹„ë™ê¸° ìœ„ì ¯ì— ì¼ê´€ì ìœ¼ë¡œ ì ìš© (10ê°œ ì´ìƒ)
- âœ… ìŠ¤ì¼ˆë ˆí†¤ UIê°€ ê° ì»´í¬ë„ŒíŠ¸ì— ë§ê²Œ ì»¤ìŠ¤í…€ ì„¤ê³„
- âœ… ì—ëŸ¬ í´ë°± UIë„ ê° ì»´í¬ë„ŒíŠ¸ë³„ë¡œ ì œê³µ
- âœ… Next.js ë‚´ë¶€ ì—ëŸ¬ (`NEXT_` digest)ë¥¼ ì˜¬ë°”ë¥´ê²Œ re-throw

**ìš°ìˆ˜ ì‚¬í•­:** ì´ íŒ¨í„´ì€ Vercel Best Practicesì˜ "Strategic Suspense Boundaries" ê·œì¹™ì„ HOCë¡œ ì¶”ìƒí™”í•˜ì—¬ ì¼ê´€ì„±ì„ ë³´ì¥í•œ ëª¨ë²”ì ì¸ êµ¬í˜„ì…ë‹ˆë‹¤.

---

### 5-3. ë°ì´í„° ìºì‹± ì „ëµ

ëª¨ë“  ì—”í‹°í‹° ì¿¼ë¦¬ íŒŒì¼(8ê°œ)ì´ **ì´ì¤‘ ìºì‹± ì „ëµ**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

```typescript
'use cache'; // Next.js 16 íŒŒì¼ ë ˆë²¨ ìºì‹œ ì§€ì‹œì–´

export const getXxx = cache(
  // React.cache() â€” ìš”ì²­ ë‚´ ì¤‘ë³µ ì œê±°
  async () => {
    cacheTag('xxx-list'); // ISRìš© íƒœê·¸ (ì˜¨ë””ë§¨ë“œ ë¬´íš¨í™” ê°€ëŠ¥)
    cacheLife('hours'); // ìºì‹œ ìˆ˜ëª… ì •ì˜
    // ...
  },
);
```

| ìºì‹œ ë ˆì´ì–´     | ëª©ì                                | ì ìš©         |
| --------------- | ---------------------------------- | ------------ |
| `'use cache'`   | Next.js 16 ì„œë²„ ì»´í¬ë„ŒíŠ¸ ê²°ê³¼ ìºì‹± | âœ… ëª¨ë“  ì¿¼ë¦¬ |
| `React.cache()` | ë™ì¼ ìš”ì²­ ë‚´ í•¨ìˆ˜ í˜¸ì¶œ ì¤‘ë³µ ì œê±°   | âœ… ëª¨ë“  ì¿¼ë¦¬ |
| `cacheTag()`    | ISR ë¬´íš¨í™” íƒœê·¸                    | âœ… ëª¨ë“  ì¿¼ë¦¬ |
| `cacheLife()`   | ìºì‹œ ìˆ˜ëª… (`hours`, `days`)        | âœ… ëª¨ë“  ì¿¼ë¦¬ |

**Vercel Best Practices ì¤€ìˆ˜:**

- âœ… `server-cache-react` (3.6) â€” Per-Request Deduplication
- âœ… ìºì‹œ ìˆ˜ëª…ì´ ë°ì´í„° íŠ¹ì„±ì— ë§ê²Œ ë¶„ë¦¬ë¨ (ëª©ë¡: hours, ìƒì„¸: days)

**íŒì •: âœ… PASS â€” ìºì‹± ì „ëµ ìš°ìˆ˜**

---

### 5-4. ì´ë¯¸ì§€ ìµœì í™” ê²€ì‚¬

| ê²€ì‚¬ í•­ëª©             | ê²°ê³¼                                          |
| --------------------- | --------------------------------------------- |
| `next/image` ì‚¬ìš©     | âœ… 22ê°œ íŒŒì¼ì—ì„œ ì¼ê´€ì  ì‚¬ìš©                  |
| ë„¤ì´í‹°ë¸Œ `<img>` íƒœê·¸ | âœ… 0ê±´ (ëª¨ë‘ `next/image` ì‚¬ìš©)               |
| `priority` (LCP íŒíŠ¸) | âœ… íˆì–´ë¡œ ë°°ë„ˆ, ë©”ì¸ ì´ë¯¸ì§€ì— ì ìš©            |
| `sizes` ì†ì„±          | âœ… ëŒ€ë¶€ë¶„ì˜ `fill` ì´ë¯¸ì§€ì— ì ì ˆí•œ sizes ì§€ì • |
| `remotePatterns` ì„¤ì • | âœ… Supabase Storageë§Œ í—ˆìš©                    |

**âš ï¸ ì£¼ì˜ ì‚¬í•­:**

1. **Marquee ì´ë²¤íŠ¸ ì´ë¯¸ì§€ ê³¼ë‹¤ priority:**

   ```tsx
   // widgets/events-section/ui/Marquee.tsx:35
   priority={index < 5}
   ```

   Marqueeì—ì„œ ìµœëŒ€ 5ê°œ ì´ë¯¸ì§€ì— `priority`ë¥¼ ì„¤ì •í•˜ê³  ìˆìŠµë‹ˆë‹¤. `priority`ëŠ” `<link rel="preload">`ë¥¼ ìƒì„±í•˜ë¯€ë¡œ,
   ë„ˆë¬´ ë§ì€ ì´ë¯¸ì§€ì— ì ìš©í•˜ë©´ ì˜¤íˆë ¤ LCPì— ë¶€ì •ì ì…ë‹ˆë‹¤. **2~3ê°œ ì´í•˜**ë¡œ ì¤„ì´ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

2. **íˆì–´ë¡œ ìºëŸ¬ì…€ ì „ì²´ priority:**
   ```tsx
   // widgets/hero-carousel/ui/View.tsx:41
   priority; // ëª¨ë“  ìºëŸ¬ì…€ ìŠ¬ë¼ì´ë“œì— ì ìš©
   ```
   ìºëŸ¬ì…€ì˜ ëª¨ë“  ì´ë¯¸ì§€ì— `priority`ê°€ ì ìš©ë˜ì–´ ìˆìŠµë‹ˆë‹¤. **ì²« ë²ˆì§¸ ìŠ¬ë¼ì´ë“œë§Œ** `priority`ë¥¼ ì£¼ëŠ” ê²ƒì´ ë°”ëŒì§í•©ë‹ˆë‹¤.

---

### 5-5. ë²ˆë“¤ ìµœì í™” ê²€ì‚¬

**Vercel Best Practices ì¤€ìˆ˜ í•­ëª©:**

| ê·œì¹™                             | ìƒíƒœ | ë¹„ê³                                                                                                                                              |
| -------------------------------- | ---- | ------------------------------------------------------------------------------------------------------------------------------------------------ |
| `bundle-barrel-imports` (2.1)    | âš ï¸   | `shared/ui/index.ts`ì—ì„œ 69ì¤„ì˜ ëŒ€í˜• ë°°ëŸ´ íŒŒì¼ ì‚¬ìš©. React Compiler + Turbopackì—ì„œ tree-shakingì´ ì‘ë™í•˜ë¯€ë¡œ ì‹¤ì§ˆì  ì˜í–¥ì€ ë‚®ìœ¼ë‚˜ ëª¨ë‹ˆí„°ë§ í•„ìš” |
| `bundle-dynamic-imports` (2.4)   | âš ï¸   | Naver Map (`react-naver-maps`)ì´ ì •ì  ì„í¬íŠ¸ë¨. `next/dynamic`ìœ¼ë¡œ ì§€ì—° ë¡œë”© ê¶Œì¥                                                                |
| `bundle-defer-third-party` (2.3) | âœ…   | Sentry Replayê°€ `replaysSessionSampleRate: 0.1`ë¡œ ì¡°ê±´ë¶€ ë¡œë“œ                                                                                    |
| React Compiler                   | âœ…   | ìë™ ë©”ëª¨ì´ì œì´ì…˜ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë” ë°©ì§€                                                                                                       |
| `cacheComponents`                | âœ…   | ì„œë²„ ì»´í¬ë„ŒíŠ¸ ìºì‹±ìœ¼ë¡œ ì„œë²„ ë¶€í•˜ ê°ì†Œ                                                                                                            |

**ê¶Œì¥ ì¡°ì¹˜:** `LocationMap` ì»´í¬ë„ŒíŠ¸ì— `next/dynamic` ì ìš©

```tsx
// í˜„ì¬: ì •ì  ì„í¬íŠ¸ (ë²ˆë“¤ì— í•­ìƒ í¬í•¨)
import { LocationMap } from './Map';

// ê¶Œì¥: ë™ì  ì„í¬íŠ¸ (í•´ë‹¹ í˜ì´ì§€ ë°©ë¬¸ ì‹œë§Œ ë¡œë“œ)
const LocationMap = dynamic(() => import('./Map').then(m => m.LocationMap), {
  loading: () => <MapSkeleton />,
  ssr: false
});
```

---

### 5-6. í™ˆ í˜ì´ì§€ ë°ì´í„° íŒ¨ì¹­ ë³‘ë ¬í™” ê²€ì‚¬

```tsx
// src/app/(main)/page.tsx â€” í™ˆ í˜ì´ì§€
<HeroCarousel />        // getBanners()
<QuickMenu />           // ì •ì 
<AnnouncementsSection /> // getRecentAnnouncements()
<EventsMarquee />       // getRecentEvents()
<GallerySection />      // getRecentGalleries()
```

- âœ… ê° ìœ„ì ¯ì´ `withAsyncBoundary`ë¡œ ë…ë¦½ì  Suspense ê²½ê³„ë¥¼ ê°€ì§
- âœ… ì„œë²„ ì»´í¬ë„ŒíŠ¸ ì»´í¬ì§€ì…˜ìœ¼ë¡œ **ìë™ ë³‘ë ¬ ë°ì´í„° íŒ¨ì¹­** (Vercel BP 3.5 ì¤€ìˆ˜)
- âœ… ê° ìœ„ì ¯ì´ ë…ë¦½ì ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¬ë°ë˜ë¯€ë¡œ ì›Œí„°í´ ì—†ìŒ

**íŒì •: âœ… PASS â€” Vercel Best Practices `async-suspense-boundaries`, `server-parallel-fetching` ì¤€ìˆ˜**

---

## 6. ğŸ” SEO ë° ë©”íƒ€ë°ì´í„° ë¶„ì„

### 6-1. ë£¨íŠ¸ ë©”íƒ€ë°ì´í„° (`src/app/layout.tsx`)

| í•­ëª©                   | ìƒíƒœ | ê°’                                                                                |
| ---------------------- | ---- | --------------------------------------------------------------------------------- |
| `title.default`        | âœ…   | `ë§Œë‚˜êµíšŒ \| Manna Church`                                                        |
| `title.template`       | âœ…   | `%s \| ë§Œë‚˜êµíšŒ`                                                                  |
| `description`          | âœ…   | êµíšŒ ì„¤ëª… (ìƒì„¸)                                                                  |
| `keywords`             | âœ…   | 30ê°œ ì´ìƒì˜ ê´€ë ¨ í‚¤ì›Œë“œ                                                           |
| `metadataBase`         | âœ…   | `https://www.manna-church.com`                                                    |
| `openGraph`            | âœ…   | title, description, url, siteName, locale, type ëª¨ë‘ ì„¤ì •                         |
| `twitter`              | âœ…   | `summary_large_image` ì¹´ë“œ                                                        |
| `robots`               | âœ…   | `index: true, follow: true`                                                       |
| `alternates.canonical` | âš ï¸   | `'./'` â€” ìƒëŒ€ ê²½ë¡œ. `metadataBase` ê¸°ì¤€ìœ¼ë¡œ í•´ì„ë˜ì§€ë§Œ, ëª…ì‹œì  ì ˆëŒ€ URLì´ ë” ì•ˆì „ |
| JSON-LD                | âœ…   | `Church` ìŠ¤í‚¤ë§ˆ (name, address, geo, telephone, email)                            |
| `opengraph-image.png`  | âœ…   | ë£¨íŠ¸ì— ì¡´ì¬ (25KB)                                                                |

---

### 6-2. ë™ì  ë¼ìš°íŠ¸ `generateMetadata` ê²€ì‚¬

**4ê°œ ë™ì  ë¼ìš°íŠ¸ ëª¨ë‘ êµ¬í˜„ ì™„ë£Œ:**

| ë¼ìš°íŠ¸                     | `generateMetadata` | `generateStaticParams` | OG Image               |
| -------------------------- | ------------------ | ---------------------- | ---------------------- |
| `/about/bulletins/[date]`  | âœ…                 | âœ… (ìµœê·¼ 20ê±´)         | âœ… ì»¤ë²„ ì´ë¯¸ì§€ or ê¸°ë³¸ |
| `/news/announcements/[id]` | âœ…                 | âœ… (ìµœê·¼ 100ê±´)        | âœ… ê¸°ë³¸ OG             |
| `/news/events/[id]`        | âœ…                 | âœ… (ìµœê·¼ 20ê±´)         | âœ… ì´ë²¤íŠ¸ ì‚¬ì§„ or ê¸°ë³¸ |
| `/news/gallery/[id]`       | âœ…                 | âœ… (ìµœê·¼ 10ê±´)         | âœ… ì¸ë„¤ì¼ or ì²« ì´ë¯¸ì§€ |

**ë¶„ì„:**

- âœ… ëª¨ë“  ë™ì  ë¼ìš°íŠ¸ì—ì„œ `generateMetadata` êµ¬í˜„
- âœ… ë°ì´í„° ì—†ëŠ” ê²½ìš° ì ì ˆí•œ fallback title ì œê³µ (`ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤`)
- âœ… ê³µì§€ì‚¬í•­, ì´ë²¤íŠ¸ì˜ `description`ì€ HTML íƒœê·¸ ì œê±° í›„ 160ì ì œí•œ ì ìš©
- âœ… `generateStaticParams`ë¡œ ë¹Œë“œ ì‹œ ì •ì  ê²½ë¡œ ì‚¬ì „ ìƒì„±

**âš ï¸ ì ì¬ì  ì´ìŠˆ â€” `generateMetadata` + í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ ì¤‘ë³µ í˜¸ì¶œ:**

ê° ë™ì  ë¼ìš°íŠ¸ í˜ì´ì§€ì—ì„œ `generateMetadata`ì™€ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ê°€ ë™ì¼ ë°ì´í„°ë¥¼ ê°ê° fetchí•©ë‹ˆë‹¤.
ê·¸ëŸ¬ë‚˜ ëª¨ë“  ì¿¼ë¦¬ í•¨ìˆ˜ê°€ `React.cache()`ë¡œ ë˜í•‘ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, **ë™ì¼ ìš”ì²­ ë‚´ì—ì„œ ìë™ ì¤‘ë³µ ì œê±°**ë©ë‹ˆë‹¤.

```
generateMetadata â†’ getAnnouncementByShortId(shortId)  â† cache hit
Page Component   â†’ getAnnouncementByShortId(shortId)  â† cache dedup
```

**íŒì •: âœ… PASS â€” ì¤‘ë³µ í˜¸ì¶œì´ì§€ë§Œ `React.cache()`ë¡œ ìµœì í™”ë¨**

---

### 6-3. `sitemap.ts` ë¶„ì„

```typescript
// ë™ì  ë°ì´í„° 4ì¢…ì„ Promise.all()ë¡œ ë³‘ë ¬ fetch
const [bulletinDates, announcementIds, eventIds, galleryIds] =
  await Promise.all([
    getRecentBulletinDates(50).catch(() => []),
    getRecentAnnouncementShortIds(100).catch(() => []),
    getRecentEventShortIds(50).catch(() => []),
    getRecentGalleryShortIds(50).catch(() => []),
  ]);
```

| í•­ëª©                           | ìƒíƒœ                                 |
| ------------------------------ | ------------------------------------ |
| ì •ì  ë¼ìš°íŠ¸ í¬í•¨               | âœ… 9ê°œ (í™ˆ, ì†Œê°œ, ì†Œì‹ í˜ì´ì§€)       |
| ë™ì  ë¼ìš°íŠ¸ í¬í•¨               | âœ… 4ì¢… (ì£¼ë³´, ê³µì§€, ì´ë²¤íŠ¸, ê°¤ëŸ¬ë¦¬)  |
| `Promise.all()` ë³‘ë ¬í™”         | âœ… (Vercel BP `async-parallel` ì¤€ìˆ˜) |
| `.catch(() => [])` ì—ëŸ¬ í•¸ë“¤ë§ | âœ… ë¶€ë¶„ ì‹¤íŒ¨ í—ˆìš©                    |
| `priority` ì„¤ì •                | âœ… ì ì ˆíˆ ë¶„ë°° (1.0 â†’ 0.4)           |
| `changeFrequency` ì„¤ì •         | âœ… ë°ì´í„° íŠ¹ì„±ì— ë§ê²Œ ì„¤ì •           |

**íŒì •: âœ… PASS â€” sitemap êµ¬í˜„ ìš°ìˆ˜**

---

### 6-4. `robots.ts` ë¶„ì„

```typescript
rules: [{ userAgent: '*', allow: '/', disallow: ['/api/'] }],
sitemap: `${BASE_URL}/sitemap.xml`,
```

- âœ… ëª¨ë“  í¬ë¡¤ëŸ¬ í—ˆìš©
- âœ… `/api/` ê²½ë¡œ ì°¨ë‹¨
- âœ… sitemap URL ëª…ì‹œ

**íŒì •: âœ… PASS**

---

### 6-5. 404 í˜ì´ì§€ SEO

- âœ… `not-found.tsx`ì— `metadata.title` ì„¤ì • (`absolute` ì‚¬ìš©ìœ¼ë¡œ template ë¬´ì‹œ)
- âœ… í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°, ë’¤ë¡œê°€ê¸° ë²„íŠ¼ ì œê³µ
- âœ… `next/image`ë¡œ 404 ì´ë¯¸ì§€ ìµœì í™”

---

## ğŸ“‹ ìµœì¢… ì¢…í•© í‰ê°€

### ì „ì²´ ê°ì‚¬ ê²°ê³¼ ìš”ì•½

| #   | ì„¹ì…˜           | íŒì •    | ì´ìŠˆ ìˆ˜              |
| --- | -------------- | ------- | -------------------- |
| 1   | ë¹Œë“œ ë¬´ê²°ì„±    | âœ… PASS | 0                    |
| 2   | íƒ€ì… ì•ˆì „ì„±    | âœ… PASS | 0                    |
| 3   | ESLint         | âœ… PASS | 0                    |
| 4   | ì˜ì¡´ì„± í˜¸í™˜    | âœ… PASS | 0                    |
| 5   | ë³´ì•ˆ           | âœ… PASS | 0 Critical, 2 Medium |
| 6   | ì•„í‚¤í…ì²˜ (FSD) | âœ… PASS | 4 Minor ìœ„ë°˜         |
| 7   | ì„±ëŠ¥           | âœ… PASS | 2 ê°œì„  ê¶Œì¥          |
| 8   | SEO            | âœ… PASS | 1 ê°œì„  ê¶Œì¥          |

---

### ğŸ”´ Critical (ë°°í¬ ì°¨ë‹¨) â€” 0ê±´

ì—†ìŒ.

---

### ğŸŸ¡ Medium (ë°°í¬ í›„ ìš°ì„  ê°œì„ ) â€” 4ê±´

| #   | í•­ëª©                                  | ìœ„ì¹˜                                   | ì„¤ëª…                                                           |
| --- | ------------------------------------- | -------------------------------------- | -------------------------------------------------------------- |
| M-1 | Sentry `tracesSampleRate: 1`          | `sentry.*.config.ts` (3ê°œ íŒŒì¼)        | í”„ë¡œë•ì…˜ì—ì„œ 100% íŠ¸ë ˆì´ìŠ¤ â†’ ë¹„ìš© ì´ìŠˆ. `0.2` ì´í•˜ ê¶Œì¥        |
| M-2 | Sentry `sendDefaultPii: true`         | `sentry.*.config.ts` (3ê°œ íŒŒì¼)        | ë°©ë¬¸ì ê°œì¸ì •ë³´ ì „ì†¡. ê°œì¸ì •ë³´ë³´í˜¸ë²• ê²€í†  í›„ `false` ì „í™˜ ê¶Œì¥ |
| M-3 | JSON-LD `strategy="afterInteractive"` | `src/app/layout.tsx:86`                | ë„¤ì´í‹°ë¸Œ `<script>` íƒœê·¸ë¡œ ë³€ê²½í•˜ì—¬ SSR HTMLì— í¬í•¨ ê¶Œì¥       |
| M-4 | ìºëŸ¬ì…€ ì „ì²´ `priority`                | `widgets/hero-carousel/ui/View.tsx:41` | ì²« ë²ˆì§¸ ìŠ¬ë¼ì´ë“œë§Œ `priority` ì ìš© ê¶Œì¥                        |

---

### ğŸŸ¢ Low (í–¥í›„ ê°œì„ ) â€” 6ê±´

| #   | í•­ëª©                          | ìœ„ì¹˜                                       | ì„¤ëª…                                            |
| --- | ----------------------------- | ------------------------------------------ | ----------------------------------------------- |
| L-1 | FSD ë°°ëŸ´ íŒŒì¼ ìš°íšŒ            | 4ê°œ ìœ„ì ¯ íŒŒì¼                              | `@/entities/xxx/api/queries` â†’ `@/entities/xxx` |
| L-2 | Marquee `priority` ê³¼ë‹¤       | `widgets/events-section/ui/Marquee.tsx:35` | `index < 5` â†’ `index < 2`                       |
| L-3 | Naver Map ì •ì  ì„í¬íŠ¸         | `widgets/location-section/ui/Map.tsx`      | `next/dynamic`ìœ¼ë¡œ ì§€ì—° ë¡œë”©                    |
| L-4 | íŒŒì¼ëª… ì˜¤íƒ€                   | `ReadMoreButtion.tsx`, `PagenationBar.tsx` | ì˜¬ë°”ë¥¸ ì˜ë¬¸ ì² ìë¡œ ë¦¬ë„¤ì´ë°                     |
| L-5 | `features/test.txt` ì”ì¡´      | `src/features/test.txt`                    | ë°°í¬ ì „ ì‚­ì œ                                    |
| L-6 | PostgREST `.or()` í•„í„° ì¸ì ì…˜ | `entities/announcement`, `entities/event`  | `query` íŒŒë¼ë¯¸í„° sanitize ê¶Œì¥                  |

---

### ğŸ† ìš°ìˆ˜ ì‚¬í•­ (Best Practices)

1. **`any` íƒ€ì… ì œë¡œ ì •ì±…** â€” ì „ì²´ ì½”ë“œë² ì´ìŠ¤ì—ì„œ `any` íƒ€ì… 0ê±´
2. **`withAsyncBoundary` HOC** â€” Suspense + Error Boundaryë¥¼ ì¼ê´€ì„± ìˆê²Œ ì¶”ìƒí™”í•œ ëª¨ë²”ì  íŒ¨í„´
3. **ì´ì¤‘ ìºì‹± ì „ëµ** â€” `'use cache'` + `React.cache()` + `cacheTag/cacheLife` ì¡°í•©
4. **PPR í™œìš©** â€” ë™ì  ë¼ìš°íŠ¸ì—ì„œ ì •ì  ì…¸ + ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ ìµœì ì˜ TTFB ë‹¬ì„±
5. **ì—”í‹°í‹° ìˆœìˆ˜ì„±** â€” FSD ì›ì¹™ì— ë”°ë¥¸ ê¹”ë”í•œ ë ˆì´ì–´ ë¶„ë¦¬
6. **SEO ì™„ì„±ë„** â€” ëª¨ë“  ë™ì  ë¼ìš°íŠ¸ì— `generateMetadata` + `generateStaticParams` + OG Image
7. **Next.js 16 ìµœì‹  ê¸°ëŠ¥ ì ê·¹ í™œìš©** â€” React Compiler, Cache Components, PPR

---

### ğŸ ìµœì¢… íŒì •

## âœ… ì¡°ê±´ë¶€ ë°°í¬ ìŠ¹ì¸ (Go with Minor Fixes)

> ì´ í”„ë¡œì íŠ¸ëŠ” ì²« ë²ˆì§¸ í”„ë¡œì íŠ¸ì„ì—ë„ ë¶ˆêµ¬í•˜ê³ , **ë¹Œë“œ ë¬´ê²°ì„±, íƒ€ì… ì•ˆì „ì„±, ì•„í‚¤í…ì²˜ ì„¤ê³„,
> ìºì‹± ì „ëµ, SEO ì™„ì„±ë„** ì¸¡ë©´ì—ì„œ í”„ë¡œë•ì…˜ ë°°í¬ì— ì¶©ë¶„í•œ ìˆ˜ì¤€ì…ë‹ˆë‹¤.
>
> Critical ì´ìŠˆ 0ê±´ìœ¼ë¡œ **ì¦‰ì‹œ ë°°í¬ ê°€ëŠ¥**í•˜ë©°,
> Medium ì´ìŠˆ 4ê±´ì€ ë°°í¬ í›„ 1~2ì£¼ ë‚´ ìš°ì„  ê°œì„ ì„ ê¶Œì¥í•©ë‹ˆë‹¤.
>
> íŠ¹íˆ `withAsyncBoundary` íŒ¨í„´ê³¼ ì´ì¤‘ ìºì‹± ì „ëµì€ Vercel Best Practicesë¥¼ ì˜ ì²´í™”í•œ ê²°ê³¼ë¬¼ì…ë‹ˆë‹¤.
> íŒ€ì˜ ì²« í”„ë¡œì íŠ¸ë¡œì„œ **ë§¤ìš° ìš°ìˆ˜í•œ í’ˆì§ˆ**ì…ë‹ˆë‹¤.

---

_ê°ì‚¬ ì™„ë£Œ â€” Vercel Principal Tech Lead (AI Auditor)_
