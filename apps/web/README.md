# ë§Œë‚˜êµíšŒ ì‚¬ìš©ì ì›¹ì‚¬ì´íŠ¸ (`apps/web`)

> 60ëŒ€ ì´ìƒ ì–´ë¥´ì‹ ë„ **êµ¬í˜• ìŠ¤ë§ˆíŠ¸í°**ì—ì„œ ë²„ë²…ì„ ì—†ì´ êµíšŒ ì†Œì‹ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê³ ì„±ëŠ¥ SSG ì›¹ì‚¬ì´íŠ¸.

- **í”„ë¡œë•ì…˜ URL:** [https://mannachurch.or.kr](https://mannachurch.or.kr)

### ğŸ“¸ í™”ë©´ ë¯¸ë¦¬ë³´ê¸° (Screenshot)

|                                                   ë©”ì¸ í™ˆ (Mobile First UX)                                                   |
| :---------------------------------------------------------------------------------------------------------------------------: |
|                                       ![ì‚¬ìš©ì ì›¹ ë©”ì¸](docs/screenshots/web-main.png)                                        |
| ë‹ë³´ê¸°ê°€ í•„ìš” ì—†ëŠ” ì§ê´€ì ì¸ í€µ ë©”ë‰´ì™€ ì‹œì›í•œ ë ˆì´ì•„ì›ƒì„ ì ìš©í•˜ì—¬, ìŠ¤ë§ˆíŠ¸í° ì¡°ì‘ì´ ì„œíˆ° ê³ ë ¹ì¸µ ìœ ì €ì˜ ì ‘ê·¼ì„±ì„ ê·¹ëŒ€í™”í–ˆìŠµë‹ˆë‹¤. |

---

## 1. ê°œë°œ í™˜ê²½

| í•­ëª©                | ë‚´ìš©                                       |
| :------------------ | :----------------------------------------- |
| **Node.js**         | ë£¨íŠ¸ ê¸°ì¤€ >= 24.0.0                        |
| **Package Manager** | pnpm (ë£¨íŠ¸ `packageManager: pnpm@10.25.0`) |
| **Dev Server Port** | `3000`                                     |

---

## 2. ê¸°ìˆ  ì†Œê°œ

### í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ

| ë¶„ë¥˜          | ê¸°ìˆ                         | ë²„ì „   | ì—­í•                                  |
| :------------ | :-------------------------- | :----- | :----------------------------------- |
| **Framework** | Next.js                     | 16.1.1 | App Router + SSG/ISR + `'use cache'` |
| **UI**        | React                       | 19.2.3 | í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ + React Compiler     |
| **Language**  | TypeScript                  | 5.9.3  | Strict ëª¨ë“œ                          |
| **Styling**   | Tailwind CSS                | 4.1.18 | ìœ í‹¸ë¦¬í‹° í¼ìŠ¤íŠ¸ CSS                  |
| **Compiler**  | babel-plugin-react-compiler | 1.0.0  | ìë™ ë©”ëª¨ì´ì œì´ì…˜                    |

### Dependencies ë¶„ì„

#### ë°ì´í„° & ì¸í”„ë¼

| íŒ¨í‚¤ì§€                   | ë²„ì „      | ì—­í•                                         |
| :----------------------- | :-------- | :------------------------------------------ |
| `@repo/database`         | workspace | Supabase Client + ìë™ ìƒì„± TypeScript íƒ€ì… |
| `@repo/ui`               | workspace | ê³µí†µ ë””ìì¸ ì‹œìŠ¤í…œ (Shadcn/UI 21ê°œ + Radix) |
| `@sentry/nextjs`         | 10.36.0   | ì—ëŸ¬ ì¶”ì  (ì„œë²„/í´ë¼ì´ì–¸íŠ¸/ì—£ì§€)            |
| `@vercel/analytics`      | 1.6.1     | í˜ì´ì§€ ì¡°íšŒ ë° ì´ë²¤íŠ¸ ë¶„ì„                  |
| `@vercel/speed-insights` | 1.3.1     | RUM(Real User Monitoring) ì„±ëŠ¥ ì§€í‘œ ìˆ˜ì§‘    |

#### UI & ì¸í„°ë™ì…˜

| íŒ¨í‚¤ì§€                    | ë²„ì „    | ì—­í•                                |
| :------------------------ | :------ | :--------------------------------- |
| `embla-carousel-autoplay` | 8.6.0   | íˆì–´ë¡œ ë°°ë„ˆ ìë™ ì¬ìƒ ìºëŸ¬ì…€       |
| `lucide-react`            | 0.546.0 | ì•„ì´ì½˜                             |
| `react-naver-maps`        | 0.1.4   | ë„¤ì´ë²„ ì§€ë„ API (ì˜¤ì‹œëŠ” ê¸¸ í˜ì´ì§€) |

#### ìœ í‹¸ë¦¬í‹°

| íŒ¨í‚¤ì§€     | ë²„ì „  | ì—­í•              |
| :--------- | :---- | :--------------- |
| `date-fns` | 4.1.0 | ë‚ ì§œ í¬ë§·íŒ…/ê³„ì‚° |

#### PWA (Progressive Web App)

| íŒ¨í‚¤ì§€               | ë²„ì „   | ì—­í•                                       |
| :------------------- | :----- | :---------------------------------------- |
| `serwist`            | 9.5.6  | Service Worker ë¼ì´ë¸ŒëŸ¬ë¦¬ (ì˜¤í”„ë¼ì¸ ì§€ì›) |
| `@serwist/turbopack` | 9.5.6  | Turbopack ê¸°ë°˜ Serwist í†µí•© (ë¹Œë“œ ìµœì í™”) |
| `esbuild`            | 0.27.3 | Service Worker ë²ˆë“¤ë§ (ê³ ì† ë¹Œë“œ)         |

### ê¸°ëŠ¥ ê°œìš”

ë§Œë‚˜êµíšŒ ì‚¬ìš©ì ì›¹ì‚¬ì´íŠ¸ëŠ” **êµíšŒ ì •ë³´ ì—´ëŒ ì „ìš©** ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤. ê´€ë¦¬ì CMS(`apps/admin`)ì—ì„œ ë“±ë¡í•œ ì½˜í…ì¸ ë¥¼ ì„±ë„ë‹˜ë“¤ì´ ì¡°íšŒí•©ë‹ˆë‹¤.

#### í˜ì´ì§€ êµ¬ì„±

| ë¼ìš°íŠ¸                     | í˜ì´ì§€        | ì£¼ìš” ê¸°ëŠ¥                                         |
| :------------------------- | :------------ | :------------------------------------------------ |
| `/`                        | ë©”ì¸ í™ˆ       | íˆì–´ë¡œ ìºëŸ¬ì…€, í€µ ë©”ë‰´, ìµœê·¼ ê³µì§€, ì´ë²¤íŠ¸, ê°¤ëŸ¬ë¦¬ |
| `/about/intro`             | ë§Œë‚˜êµíšŒ ì†Œê°œ | ë‹´ì„ëª©ì‚¬ ì¸ì‚¬ë§, êµíšŒ ë¹„ì „                        |
| `/about/worship`           | ì˜ˆë°° ì•ˆë‚´     | ì˜ˆë°° ì‹œê°„í‘œ, ëª¨ì„ ì•ˆë‚´                            |
| `/about/servants`          | ì„¬ê¸°ëŠ” ì‚¬ëŒë“¤ | ë‹´ì„/í˜‘ë™ëª©ì‚¬, êµ¬ì—­ì¥ ì†Œê°œ                        |
| `/about/sermons`           | 1ë¶„ ë©”ì‹œì§€    | ì„¤êµë¥¼ ìš”ì•½í•œ 1ë¶„ ë©”ì‹œì§€ ëª©ë¡                     |
| `/about/location`          | ì˜¤ì‹œëŠ” ê¸¸     | ë„¤ì´ë²„ ì§€ë„, ì£¼ì†Œ, êµí†µí¸ ì•ˆë‚´                    |
| `/about/bulletins`         | ì£¼ë³´          | ì—°/ì›” í•„í„° + í˜ì´ì§€ë„¤ì´ì…˜                         |
| `/about/bulletins/[date]`  | ì£¼ë³´ ìƒì„¸     | ì£¼ë³´ ì´ë¯¸ì§€ ëª©ë¡                                  |
| `/about/missionary`        | ì„ êµì‚¬ í›„ì›   | ì„ êµì‚¬ ì†Œê°œ                                       |
| `/news/announcements`      | ê³µì§€ì‚¬í•­      | ê²€ìƒ‰ + í˜ì´ì§€ë„¤ì´ì…˜                               |
| `/news/announcements/[id]` | ê³µì§€ì‚¬í•­ ìƒì„¸ | ë³¸ë¬¸, ì´ë¯¸ì§€, ë’¤ë¡œê°€ê¸°                            |
| `/news/events`             | ì´ë²¤íŠ¸        | ê²€ìƒ‰ + í˜ì´ì§€ë„¤ì´ì…˜                               |
| `/news/events/[id]`        | ì´ë²¤íŠ¸ ìƒì„¸   | ë³¸ë¬¸, ì´ë¯¸ì§€, ë’¤ë¡œê°€ê¸°                            |
| `/news/gallery`            | ê°¤ëŸ¬ë¦¬        | ê²€ìƒ‰ + í˜ì´ì§€ë„¤ì´ì…˜ (ì¸ë„¤ì¼ ê·¸ë¦¬ë“œ)               |
| `/news/gallery/[id]`       | ê°¤ëŸ¬ë¦¬ ìƒì„¸   | ì´ë¯¸ì§€ ëª©ë¡, ë’¤ë¡œê°€ê¸°                             |
| `/~offline`                | ì˜¤í”„ë¼ì¸      | PWA ì˜¤í”„ë¼ì¸ í´ë°± ì•ˆë‚´ í˜ì´ì§€                     |

---

## 3. ì•„í‚¤í…ì²˜

### 3-1. Clean FSD (Feature-Sliced Design)

```
src/
â”œâ”€â”€ app/                        # App Layer â€” ë¼ìš°íŒ… ì „ìš©
â”‚   â”œâ”€â”€ (main)/                 # ë©”ì¸ ë ˆì´ì•„ì›ƒ (Header + Footer + ScrollFAB)
â”‚   â”‚   â”œâ”€â”€ page.tsx            #   í™ˆ (HeroCarousel, QuickMenu, ê³µì§€, ì´ë²¤íŠ¸, ê°¤ëŸ¬ë¦¬)
â”‚   â”‚   â””â”€â”€ (content)/          #   ì½˜í…ì¸  ë ˆì´ì•„ì›ƒ (AboutSidebar + children)
â”‚   â”‚       â”œâ”€â”€ about/          #     êµíšŒì†Œê°œ ì„¹ì…˜
â”‚   â”‚       â”‚   â”œâ”€â”€ intro/      #       ë§Œë‚˜êµíšŒ ì†Œê°œ
â”‚   â”‚       â”‚   â”œâ”€â”€ worship/    #       ì˜ˆë°° ì•ˆë‚´
â”‚   â”‚       â”‚   â”œâ”€â”€ servants/   #       ì„¬ê¸°ëŠ” ì‚¬ëŒë“¤
â”‚   â”‚       â”‚   â”œâ”€â”€ sermons/    #       1ë¶„ ë©”ì‹œì§€
â”‚   â”‚       â”‚   â”œâ”€â”€ location/   #       ì˜¤ì‹œëŠ” ê¸¸
â”‚   â”‚       â”‚   â”œâ”€â”€ bulletins/  #       ì£¼ë³´ (ë¦¬ìŠ¤íŠ¸ + [date] ìƒì„¸)
â”‚   â”‚       â”‚   â””â”€â”€ missionary/ #       ì„ êµì‚¬ í›„ì›
â”‚   â”‚       â””â”€â”€ news/           #     ë§Œë‚˜ì†Œì‹ ì„¹ì…˜
â”‚   â”‚           â”œâ”€â”€ announcements/ #     ê³µì§€ì‚¬í•­ (ë¦¬ìŠ¤íŠ¸ + [id] ìƒì„¸)
â”‚   â”‚           â”œâ”€â”€ events/     #       ì´ë²¤íŠ¸ (ë¦¬ìŠ¤íŠ¸ + [id] ìƒì„¸)
â”‚   â”‚           â””â”€â”€ gallery/    #       ê°¤ëŸ¬ë¦¬ (ë¦¬ìŠ¤íŠ¸ + [id] ìƒì„¸)
â”‚   â”œâ”€â”€ asset/                  # ì •ì  ì´ë¯¸ì§€ ìì‚° (ì•„ì´ì½˜, ë°°ë„ˆ ë“±)
â”‚   â”œâ”€â”€ provider/               # Client Provider ë ˆì´ì–´
â”‚   â”‚   â””â”€â”€ serwist.ts          #   SerwistProvider ('use client' wrapper)
â”‚   â”œâ”€â”€ serwist/                # Serwist ë¹Œë“œ ì¶œë ¥ (sw.js)
â”‚   â”œâ”€â”€ styles/                 # globals.css (Tailwind v4 ì—”íŠ¸ë¦¬)
â”‚   â”œâ”€â”€ layout.tsx              # RootLayout (í°íŠ¸, SEO, JSON-LD, Analytics, PWA)
â”‚   â”œâ”€â”€ global-error.tsx        # ì „ì—­ ì—ëŸ¬ ë°”ìš´ë”ë¦¬ (Sentry ìº¡ì²˜)
â”‚   â”œâ”€â”€ not-found.tsx           # 404 í˜ì´ì§€
â”‚   â”œâ”€â”€ manifest.json           # PWA Manifest (ì•± ì´ë¦„, ì•„ì´ì½˜, í…Œë§ˆ ìƒ‰ìƒ)
â”‚   â”œâ”€â”€ sw.ts                   # Service Worker (Serwist ê¸°ë°˜ ì˜¤í”„ë¼ì¸ ìºì‹±)
â”‚   â”œâ”€â”€ sitemap.ts              # ë™ì  Sitemap (ì •ì  + DB ê¸°ë°˜ ë™ì  ê²½ë¡œ)
â”‚   â””â”€â”€ robots.ts               # robots.txt
â”œâ”€â”€ widgets/                    # Widgets Layer â€” í˜ì´ì§€ êµ¬íšë³„ ì¡°í•© ì»´í¬ë„ŒíŠ¸ (15ê°œ)
â”‚   â”œâ”€â”€ hero-carousel/          #   Embla Carousel + Autoplay ê¸°ë°˜ íˆì–´ë¡œ ë°°ë„ˆ
â”‚   â”œâ”€â”€ quick-menu/             #   QuickMenu ê·¸ë¦¬ë“œ + YouTube ì„¹ì…˜
â”‚   â”œâ”€â”€ announcements-section/  #   ê³µì§€ì‚¬í•­ í™ˆ ì„¹ì…˜ / ë¦¬ìŠ¤íŠ¸ / ìƒì„¸
â”‚   â”œâ”€â”€ events-section/         #   ì´ë²¤íŠ¸ ë§ˆí€´ / ë¦¬ìŠ¤íŠ¸ / ìƒì„¸
â”‚   â”œâ”€â”€ gallery-section/        #   ê°¤ëŸ¬ë¦¬ í™ˆ ì„¹ì…˜ / ë¦¬ìŠ¤íŠ¸ / ìƒì„¸
â”‚   â”œâ”€â”€ bulletins-section/      #   ì£¼ë³´ ë¦¬ìŠ¤íŠ¸ + ì—°/ì›” í•„í„° / ìƒì„¸
â”‚   â”œâ”€â”€ intro-section/          #   ë‹´ì„ëª©ì‚¬ ì¸ì‚¬ë§
â”‚   â”œâ”€â”€ worship-section/        #   ì˜ˆë°° ì•ˆë‚´
â”‚   â”œâ”€â”€ servants-section/       #   ì„¬ê¸°ëŠ” ì‚¬ëŒë“¤ (ì—­í• ë³„ ê·¸ë£¹)
â”‚   â”œâ”€â”€ missionary-section/     #   ì„ êµì‚¬ í›„ì›
â”‚   â”œâ”€â”€ location-section/       #   ë„¤ì´ë²„ ì§€ë„ + ì£¼ì†Œ + êµí†µí¸
â”‚   â”œâ”€â”€ sermons-section/        #   1ë¶„ ë©”ì‹œì§€
â”‚   â”œâ”€â”€ about-layout/           #   ì½˜í…ì¸  ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜
â”‚   â”œâ”€â”€ main-layout/            #   Header + Footer + MobileMenu + ScrollFAB
â”‚   â””â”€â”€ pwa/                    #   PWA ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸ + External Store
â”œâ”€â”€ entities/                   # Entities Layer â€” Read ì „ìš© (ì¿¼ë¦¬ + ë„ë©”ì¸ ëª¨ë¸, 8ê°œ)
â”‚   â”œâ”€â”€ announcement/           #   model/ + api/ (dto, mapper, queries)
â”‚   â”œâ”€â”€ banner/                 #   íˆì–´ë¡œ ë°°ë„ˆ ë°ì´í„°
â”‚   â”œâ”€â”€ bulletin/               #   ì£¼ë³´ ë°ì´í„°
â”‚   â”œâ”€â”€ event/                  #   ì´ë²¤íŠ¸ ë°ì´í„°
â”‚   â”œâ”€â”€ gallery/                #   ê°¤ëŸ¬ë¦¬ + ì¤‘ì²© ì´ë¯¸ì§€ ë°ì´í„° (gallery_images)
â”‚   â”œâ”€â”€ missionary/             #   ì„ êµì‚¬ ë°ì´í„°
â”‚   â”œâ”€â”€ sermon/                 #   ì„¤êµ ë°ì´í„°
â”‚   â””â”€â”€ servant/                #   ì„¬ê¸°ëŠ” ì‚¬ëŒë“¤ ë°ì´í„° + config/positions
â”œâ”€â”€ shared/                     # Shared Layer â€” ìˆœìˆ˜ ìœ í‹¸ë¦¬í‹° & UI
â”‚   â”œâ”€â”€ config/                 #   churchData (êµíšŒ ë©”íƒ€ì •ë³´), menuData, Items (í€µ ë©”ë‰´)
â”‚   â”œâ”€â”€ icon/                   #   ì†Œì…œ ì•„ì´ì½˜ SVG (Google, Kakao, Naver)
â”‚   â”œâ”€â”€ lib/                    #   formatKoreanDate ë“± ë‚ ì§œ ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ ui/                     #   base/ (Shadcn ë˜í¼), components/ (PaginationBar ë“±), utils/
â”œâ”€â”€ instrumentation.ts          # Sentry ì„œë²„ ê³„ì¸¡ (ë¹Œë“œ íƒ€ì„ ì´ˆê¸°í™”)
â””â”€â”€ instrumentation-client.ts   # Sentry í´ë¼ì´ì–¸íŠ¸ ê³„ì¸¡ (ë¸Œë¼ìš°ì € ì´ˆê¸°í™”)
```

### 3-2. ì˜ì¡´ì„± ê·œì¹™

```
App â†’ Widgets â†’ Entities â†’ Shared â†’ @repo/ui,@repo/database
```

`apps/web`ì—ëŠ” `features/` ë ˆì´ì–´ê°€ **ì—†ìŠµë‹ˆë‹¤**. ì‚¬ìš©ì ì›¹ì€ ì½ê¸° ì „ìš©ì´ë¯€ë¡œ CUD ë¡œì§ì´ ë¶ˆí•„ìš”í•©ë‹ˆë‹¤.

### 3-3. ë Œë”ë§ & ìºì‹± ì „ëµ

| ì „ëµ                        | ì ìš© ë²”ìœ„             | ì„¤ëª…                                               |
| :-------------------------- | :-------------------- | :------------------------------------------------- |
| **`'use cache'`**           | ëª¨ë“  Entity ì¿¼ë¦¬ í•¨ìˆ˜ | íŒŒì¼ ë ˆë²¨ `'use cache'` + `cacheTag` + `cacheLife` |
| **`cacheLife('hours')`**    | ë¦¬ìŠ¤íŠ¸/ìµœê·¼ ë°ì´í„°    | ì‹œê°„ ë‹¨ìœ„ ìºì‹œ (ê³µì§€ ëª©ë¡, ìµœê·¼ ê°¤ëŸ¬ë¦¬ ë“±)         |
| **`cacheLife('days')`**     | ìƒì„¸ í˜ì´ì§€ ë°ì´í„°    | ì¼ ë‹¨ìœ„ ìºì‹œ (ê°œë³„ ê³µì§€, ê°¤ëŸ¬ë¦¬ ìƒì„¸ ë“±)           |
| **`cacheComponents: true`** | `next.config.ts`      | PPR(Partial Prerendering) í™œì„±í™”                   |
| **React Compiler**          | ì „ì—­                  | `reactCompiler: true`ë¡œ ìë™ ë©”ëª¨ì´ì œì´ì…˜          |

### 3-4. SEO ìµœì í™”

| í•­ëª©              | êµ¬í˜„                                                           |
| :---------------- | :------------------------------------------------------------- |
| **ë©”íƒ€ë°ì´í„°**    | `churchData` ì¤‘ì•™ ê´€ë¦¬ â†’ `Metadata` APIë¡œ ì „ì—­ + í˜ì´ì§€ë³„ ì„¤ì • |
| **JSON-LD**       | `RootLayout`ì— `@type: Church` êµ¬ì¡°í™” ë°ì´í„° ì‚½ì…              |
| **Sitemap**       | ì •ì  10ê°œ + ë™ì  ê²½ë¡œ (ê³µì§€, ì£¼ë³´, ì´ë²¤íŠ¸, ê°¤ëŸ¬ë¦¬) ìë™ ìƒì„±   |
| **robots.txt**    | ì „ì²´ í—ˆìš©, `/api/` ì°¨ë‹¨                                        |
| **ê²€ìƒ‰ì—”ì§„ ì¸ì¦** | Google Search Console + Naver Search Advisor                   |
| **OpenGraph**     | ì „ì—­ OG ì´ë¯¸ì§€ + í˜ì´ì§€ë³„ íƒ€ì´í‹€ í…œí”Œë¦¿                        |
| **URL ìŠ¬ëŸ¬ê·¸**    | `ì œëª©-shortId` í˜•ì‹ (SEO ì¹œí™”ì  + ê³ ìœ ì„± ë³´ì¥)                 |

### 3-5. í•µì‹¬ íŒ¨í„´

#### 1. `withAsyncBoundary` HOC

ëª¨ë“  ë¹„ë™ê¸° Server Componentì— ì ìš©í•˜ëŠ” ì—ëŸ¬/ë¡œë”© í†µí•© ë˜í¼ì…ë‹ˆë‹¤.

```
[ë¹„ë™ê¸° Server Component]
  â†’ Suspense (loadingFallback: Skeleton)
  â†’ try-catch (errorFallback: ì—ëŸ¬ UI)
  â†’ Next.js ë‚´ë¶€ ì—ëŸ¬ â†’ rethrow (searchParams, dynamic-server-error)
  â†’ ì¼ë°˜ ì—ëŸ¬ â†’ Sentry ìº¡ì²˜ + ì—ëŸ¬ UI í‘œì‹œ
```

#### 2. Client Component Boundary

`'use cache'` í™˜ê²½ì—ì„œ `next/link`ì˜ hydration mismatchë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´, ì¸í„°ë™í‹°ë¸Œ ë Œë”ë§ì€ `'use client'` ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤.

```
[Server Component (List.tsx)]
  â†’ 'use cache' ë°ì´í„° fetch
  â†’ Client Component (Item.tsx) ë Œë”ë§
    â†’ Link + Image + ì¸í„°ë™ì…˜ ë¡œì§
```

#### 3. ë„¤ì´ë²„ ì§€ë„ í†µí•©

`react-naver-maps`ë¥¼ ì‚¬ìš©í•˜ì—¬ `'use client'` ì»´í¬ë„ŒíŠ¸ì—ì„œ ë„¤ì´ë²„ ì§€ë„ë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤. `NEXT_PUBLIC_NAVER_MAP_CLIENT_ID` í™˜ê²½ ë³€ìˆ˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.

#### 4. PWA (Progressive Web App)

**Serwist + Turbopack** ê¸°ë°˜ìœ¼ë¡œ PWAë¥¼ êµ¬í˜„í•˜ì—¬ ì˜¤í”„ë¼ì¸ ì§€ì› ë° ì•± ì„¤ì¹˜ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

| íŒŒì¼                      | ì—­í•                                                      |
| :------------------------ | :------------------------------------------------------- |
| `app/manifest.json`       | PWA ë©”íƒ€ë°ì´í„° (ì•± ì´ë¦„, ì•„ì´ì½˜, í…Œë§ˆ ìƒ‰ìƒ, í‘œì‹œ ëª¨ë“œ)   |
| `app/sw.ts`               | Service Worker (precache + runtime cache + offline í´ë°±) |
| `app/provider/serwist.ts` | `SerwistProvider` client wrapper (ìë™ SW ë“±ë¡)          |
| `widgets/pwa/model/`      | `pwaStore` â€” External Store (useSyncExternalStore)       |
| `widgets/pwa/ui/`         | `PWAInstallPrompt` â€” A2HS ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸ UI               |

**í•µì‹¬ ê¸°ëŠ¥:**

- **precacheEntries:** ë¹Œë“œ ì‹œ ì •ì  ìì‚° ìë™ ìºì‹± (`__SW_MANIFEST`)
- **runtimeCaching:** ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ë™ì  ìºì‹± (`defaultCache` ì „ëµ)
- **offline fallback:** `/~offline` í˜ì´ì§€ë¡œ ì˜¤í”„ë¼ì¸ í´ë°±
- **skipWaiting + clientsClaim:** ì¦‰ì‹œ í™œì„±í™” (ìƒˆ ë²„ì „ ë°°í¬ ì‹œ)

#### 5. Sentry ì—ëŸ¬ ì¶”ì 

| íŒŒì¼                        | ì—­í•                                        |
| :-------------------------- | :----------------------------------------- |
| `instrumentation.ts`        | ì„œë²„ ì‚¬ì´ë“œ Sentry ì´ˆê¸°í™” (ë¹Œë“œ íƒ€ì„)      |
| `instrumentation-client.ts` | í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ Sentry ì´ˆê¸°í™” (ë¸Œë¼ìš°ì €) |
| `sentry.server.config.ts`   | ì„œë²„ ëŸ°íƒ€ì„ Sentry ì„¤ì •                    |
| `sentry.edge.config.ts`     | Edge ëŸ°íƒ€ì„ Sentry ì„¤ì •                    |
| `app/global-error.tsx`      | ì „ì—­ ì—ëŸ¬ ë°”ìš´ë”ë¦¬ (Sentry ìë™ ìº¡ì²˜ + UI) |

---

## 4. ì‚¬ìš©ì ê²½í—˜(UX) ë° ì„±ëŠ¥ ìµœì í™” ì „ëµ

ì´ í”„ë¡œì íŠ¸ì˜ í•µì‹¬ íƒ€ê²Ÿ ìœ ì €ëŠ” **ìŠ¤ë§ˆíŠ¸í° ì¡°ì‘ì— ìµìˆ™í•˜ì§€ ì•Šê³ , êµ¬í˜• ê¸°ê¸°ë¥¼ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” 60ëŒ€ ì´ìƒì˜ ê³ ë ¹ì¸µ ì„±ë„**ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ëª¨ë“  ê¸°ìˆ ì  ì˜ì‚¬ê²°ì •ì„ 'ì–´ë¥´ì‹ ë“¤ì˜ ì‚¬ìš©ì„±'ì— ë§ì·„ìŠµë‹ˆë‹¤.

### 4-1. PWA(Progressive Web App) ë„ì… ë°°ê²½

- **ë¬¸ì œ ì •ì˜:** ê³ ë ¹ì¸µ ìœ ì €ì—ê²Œ ë§¤ë²ˆ ë¸Œë¼ìš°ì €ë¥¼ ì—´ê³  'ë§Œë‚˜êµíšŒ'ë¥¼ ê²€ìƒ‰í•˜ê±°ë‚˜ ë¶ë§ˆí¬ë¥¼ ì°¾ì•„ ë“¤ì–´ê°€ëŠ” ê³¼ì •ì€ ì§„ì… ì¥ë²½ì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤.
- **í•´ê²° ì „ëµ:** **Serwist**ë¥¼ í™œìš©í•´ PWAë¥¼ êµ¬ì¶•í•˜ê³ , í™ˆ í™”ë©´ ì¶”ê°€(A2HS) ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. `useSyncExternalStore` ê¸°ë°˜ External Store íŒ¨í„´ìœ¼ë¡œ ìŠ¤í† ë¦¬ì§€ ìƒíƒœ ë™ê¸°í™” ì‹œ ì´ì¤‘ ë Œë”ë§ì„ ì›ì²œ ì°¨ë‹¨í•©ë‹ˆë‹¤.
- **ê²°ê³¼:** ì–´ë¥´ì‹ ë“¤ì´ ìŠ¤ë§ˆíŠ¸í° ë°”íƒ•í™”ë©´ì— ìƒì„±ëœ 'ë§Œë‚˜êµíšŒ ì•±' ì•„ì´ì½˜ë§Œ ëˆ„ë¥´ë©´ ì¦‰ì‹œ ì‚¬ì´íŠ¸ì— ì ‘ì†í•  ìˆ˜ ìˆì–´, ë„¤ì´í‹°ë¸Œ ì•±ê³¼ ë™ì¼í•œ ì ‘ê·¼ì„±ì„ ì œê³µí•©ë‹ˆë‹¤. ì˜¤í”„ë¼ì¸ í´ë°±(`/~offline`)ìœ¼ë¡œ ë°ì´í„° ì—°ê²°ì´ ëŠê¸´ í™˜ê²½ì—ì„œë„ ì•ˆë‚´ í˜ì´ì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

### 4-2. í•µì‹¬ ì›¹ ë°”ì´íƒˆ(Core Web Vitals) ë° ì§€í‘œ ë°©ì–´

ì‚¬ìš©ìì˜ ì²´ê° ì„±ëŠ¥ê³¼ UXë¥¼ ê·¹ëŒ€í™”í•˜ê¸° ìœ„í•´ ë Œë”ë§ íŒŒì´í”„ë¼ì¸ê³¼ ì—ì…‹ ìµœì í™”ì— ì§‘ì¤‘í•œ ê²°ê³¼, **Lighthouse ë°ìŠ¤í¬íƒ‘ ê¸°ì¤€ 98/100/100/100**ì´ë¼ëŠ” ì••ë„ì ì¸ ì§€í‘œì™€ ì™„ë²½í•œ **CLS(ë ˆì´ì•„ì›ƒ ì•ˆì •ì„±) 0.00**ì„ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤.

| ë¶„ë¥˜                 | ì¸¡ì • ì§€í‘œ                              |          ê²°ê³¼          | ìµœì í™” ë° ì—”ì§€ë‹ˆì–´ë§ ì˜ì‚¬ê²°ì •                                                                                                                               |
| :------------------- | :------------------------------------- | :--------------------: | :---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Core Web Vitals**  | **CLS** (ëˆ„ì  ë ˆì´ì•„ì›ƒ ì´ë™)           |        **0.00**        | ì»´í¬ë„ŒíŠ¸ ë¡œë”© ì‹œ ëœì»¹ê±°ë¦¬ëŠ” í˜„ìƒì„ 100% ì°¨ë‹¨í•˜ì—¬, ì‹œë ¥ì´ ì¢‹ì§€ ì•Šì€ ì–´ë¥´ì‹ ë“¤ì´ ê¸€ì„ ì½ì„ ë•Œ í™”ë©´ì´ ë°€ë¦¬ëŠ” ë¶ˆí¸í•¨ì„ ì›ì²œì ìœ¼ë¡œ ì—†ì•´ìŠµë‹ˆë‹¤.                    |
|                      | **TBT** (ì´ ì°¨ë‹¨ ì‹œê°„)                 | **0ms (Mobile 180ms)** | React Compilerì™€ Next.js 16 `'use cache'`ë¥¼ ê²°í•©í•˜ì—¬ ë©”ì¸ ìŠ¤ë ˆë“œ ì—°ì‚°ì„ ìµœì†Œí™”, **ëŠë¦° CPUë¥¼ ê°€ì§„ êµ¬í˜• í°ì—ì„œë„ í„°ì¹˜ ì¦‰ì‹œ ë°˜ì‘í•˜ëŠ” ë¹ ë¦¿í•¨**ì„ í™•ë³´í–ˆìŠµë‹ˆë‹¤. |
| **Lighthouse Audit** | **Performance** (ì„±ëŠ¥)                 |         **98**         | SSG/PPR ê¸°ë°˜ì˜ ì •ì  ë Œë”ë§ì„ í†µí•´ ì„œë²„ ì‘ë‹µ ì‹œê°„ê³¼ í´ë¼ì´ì–¸íŠ¸ ë Œë”ë§ ë¶€í•˜ë¥¼ ìµœì†Œí™”í–ˆìŠµë‹ˆë‹¤.                                                                 |
|                      | **Accessibility, Best Practices, SEO** |        **100**         | ì›¹ ì ‘ê·¼ì„±(ëª…ë„ ëŒ€ë¹„, ARIA), ë³´ì•ˆ ë° ì›¹ í‘œì¤€ ê¶Œì¥ì‚¬í•­, êµ¬ì¡°í™”ëœ ë°ì´í„°ë¥¼ í†µí•œ SEO ì§€í‘œ ëª¨ë‘ 100ì  ë§Œì ì„ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤.                                       |
| **RUM** (Real User)  | **Vercel Speed Insights**              |       **100ì **        | ì‹¤í—˜ì‹¤ ë°ì´í„°(Lighthouse)ë¥¼ ë„˜ì–´, **ì‹¤ì œ ë°°í¬ í™˜ê²½ì— ì ‘ì†í•˜ëŠ” ìœ ì €ë“¤ì˜ ì²´ê° ë¡œë”© ì†ë„(RUM)**ì—ì„œë„ ë§Œì ì„ ê¸°ë¡í•˜ì—¬ ìµœì í™”ì˜ ì‹¤íš¨ì„±ì„ ì¦ëª…í–ˆìŠµë‹ˆë‹¤.          |

---

## 5. íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 5-1. Tailwind CSS ë¯¸ë””ì–´ì¿¼ë¦¬ ìš°ì„ ìˆœìœ„ ê¹¨ì§

> ìƒì„¸: `docs/errors/0003-tailwind-css-cascade-order.md`

**ë¬¸ì œ:** ëª¨ë…¸ë ˆí¬ í™˜ê²½ì—ì„œ `hidden lg:flex` ë“± ë°˜ì‘í˜• ìœ í‹¸ë¦¬í‹°ê°€ ì‘ë™í•˜ì§€ ì•ŠìŒ. `display: none`ì´ ë¯¸ë””ì–´ì¿¼ë¦¬ë¥¼ ë®ì–´ì”€.

**ì›ì¸:** ë‹¨ì¼ ì•± í™˜ê²½ê³¼ ë‹¬ë¦¬ ëª¨ë…¸ë ˆí¬ êµ¬ì¡°ì—ì„œëŠ” ì™¸ë¶€ íŒ¨í‚¤ì§€(`@repo/ui/styles.css`)ì™€ ë©”ì¸ ì•±(`globals.css`)ì˜ CSSê°€ ê°œë³„ì ìœ¼ë¡œ ì»´íŒŒì¼ë˜ì–´ ë¡œë“œ. ì´ ê³¼ì •ì—ì„œ ë³‘í•© ìˆœì„œê°€ ê¼¬ì´ë©´ì„œ ë©”ì¸ ì•±ì˜ ê¸°ë³¸ `.hidden` í´ë˜ìŠ¤ê°€ UI íŒ¨í‚¤ì§€ì˜ ë°˜ì‘í˜• ë¯¸ë””ì–´ì¿¼ë¦¬ ê·œì¹™ë³´ë‹¤ ë‚˜ì¤‘ì— ì„ ì–¸ë˜ì–´ ìš°ì„ ìˆœìœ„(CSS Cascade Specificity)ë¥¼ ë®ì–´ì“°ëŠ” ì•„í‚¤í…ì²˜ ê²°í•¨ ë°œìƒ.

**í•´ê²°:** Turborepo ê³µì‹ íŒ¨í„´ ì ìš©. `layout.tsx`ì—ì„œ `@repo/ui/styles.css`ë¥¼ ë¨¼ì € importí•œ ë’¤ `globals.css`ë¥¼ importí•˜ì—¬ ë¡œë“œ ìˆœì„œ ë³´ì¥.

### 5-2. Gallery `'use cache'` Hydration Mismatch (#418)

> ìƒì„¸: `docs/errors/0005-gallery-use-cache-hydration-mismatch.md`

**ë¬¸ì œ:** ê°¤ëŸ¬ë¦¬ ë¦¬ìŠ¤íŠ¸ í˜ì´ì§€ì—ì„œ í”„ë¡œë•ì…˜ ë¹Œë“œ ì‹œ `Minified React error #418` (Hydration Mismatch) ë°œìƒ. ì²« ë¡œë“œ ì •ìƒ â†’ ìƒˆë¡œê³ ì¹¨ ì‹œ ì—ëŸ¬. dev ëª¨ë“œì—ì„œëŠ” ë¯¸ë°œìƒ.

**ì›ì¸:** `gallery/api/queries.ts`ì— `gallery_images(*)` ì¤‘ì²© ê´€ê³„í˜• ì¿¼ë¦¬ê°€ í¬í•¨ëœ `'use cache'` í•¨ìˆ˜ê°€ ëª¨ë“ˆ ê·¸ë˜í”„ì— ì¡´ì¬í•  ë•Œ, Server Componentì—ì„œ `next/link`ë¥¼ ì§ì ‘ ë Œë”ë§í•˜ë©´ RSC payload ìºì‹œì— Linkì˜ server-rendered HTMLì´ í¬í•¨ë¨. hydration ì‹œ `Link` ë‚´ë¶€ `useMemo`ê°€ `RouterContext` ê¸°ë°˜ìœ¼ë¡œ hrefë¥¼ ì¬ê³„ì‚°í•˜ë©´ì„œ ìºì‹œëœ HTMLê³¼ ë¶ˆì¼ì¹˜ ë°œìƒ.

**í•´ê²°:** `Link`ë¥¼ `'use client'` ì»´í¬ë„ŒíŠ¸(`Item.tsx`)ë¡œ ë¶„ë¦¬í•˜ì—¬ client component boundary ìƒì„±. `'use cache'`ì˜ RSC payload ìºì‹±ì´ client component boundaryì—ì„œ ë©ˆì¶”ë¯€ë¡œ, Linkì˜ ë Œë”ëœ HTMLì´ ìºì‹œì— í¬í•¨ë˜ì§€ ì•ŠìŒ.

### 5-3. PWA ìŠ¤í† ë¦¬ì§€ ìƒíƒœ ë™ê¸°í™” ì‹œ ì´ì¤‘ ë Œë”ë§(Double Rendering) ë°œìƒ

> ìƒì„¸: `docs/errors/0004-pwa-double-rendering-sync.md`

**ë¬¸ì œ:** PWA íŒì—… ì»´í¬ë„ŒíŠ¸ì—ì„œ sessionStorageì™€ localStorage ê°’ì„ ì½ì–´ì™€ í™”ë©´ì— ë°˜ì˜í•  ë•Œ, ì´ˆê¸° ë§ˆìš´íŠ¸ ì§í›„ ì˜ë¯¸ ì—†ëŠ” ì´ì¤‘ ë Œë”ë§(Cascading Renders)ì´ ë°œìƒí•¨.

**ì›ì¸:** ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ useStateì˜ ì´ˆê¸°ê°’ìœ¼ë¡œ 1ì°¨ ë Œë”ë§ì„ ì§„í–‰í•œ í›„, ë§ˆìš´íŠ¸ê°€ ì™„ë£Œë˜ë©´ useEffectê°€ ë¹„ë¡œì†Œ ìŠ¤í† ë¦¬ì§€ë¥¼ ì½ì–´ì™€ setStateë¥¼ í˜¸ì¶œí•˜ì—¬ 2ì°¨ ë Œë”ë§ì„ ìœ ë°œí•¨. ë¸Œë¼ìš°ì € API ì˜ì¡´ì„± ë•Œë¬¸ì— ë Œë”ë§ ì‚¬ì´í´ê³¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(ìŠ¤í† ë¦¬ì§€ ì½ê¸°)ì˜ íƒ€ì´ë°ì´ ì–´ê¸‹ë‚˜ì„œ ë°œìƒí•˜ëŠ” ì „í˜•ì ì¸ ìƒíƒœ ê²°í•©(Coupling) ë¬¸ì œ.

**í•´ê²°:** useState + useEffect ì¡°í•©ì„ ì™„ì „íˆ ì œê±°í•˜ê³ , External Store íŒ¨í„´ì„ ë„ì….
ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆœìˆ˜ ë°”ë‹ë¼ JS ê¸°ë°˜ì˜ ì™¸ë¶€ ìŠ¤í† ì–´(`pwaStore`)ë¡œ ì™„ì „íˆ ë¶„ë¦¬í•˜ê³ , React ì½”ì–´ í›…ì¸ `useSyncExternalStore`ë¥¼ ì‚¬ìš©í•´ ì—°ê²°í•¨. íŒŒìƒ ìƒíƒœ ì…€ë ‰í„°(Selector)ë¥¼ í†µí•´ ìµœì¢… UI ê²°ê³¼ê°’(boolean)ë§Œ êµ¬ë…í•˜ê²Œ í•˜ì—¬ ë¶ˆí•„ìš”í•œ ë Œë”ë§ì„ ì›ì²œ ì°¨ë‹¨(Bailout)í•¨.

---

## 6. ì‹¤í–‰ ë§¤ë‰´ì–¼

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

| ë„êµ¬    | ìµœì†Œ ë²„ì „  | ë¹„ê³                                         |
| :------ | :--------- | :------------------------------------------ |
| Node.js | >= 24.0.0  | ë£¨íŠ¸ `package.json` engines ê¸°ì¤€            |
| pnpm    | >= 10.25.0 | ë£¨íŠ¸ `packageManager` ê¸°ì¤€                  |
| ë¹Œë“œ    | â€”          | `@repo/ui`, `@repo/database`ì˜ `dist/` í•„ìš” |

### ì„¤ì¹˜

```bash
# ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ ì‹¤í–‰
pnpm install

# ë‚´ë¶€ íŒ¨í‚¤ì§€ ë¹Œë“œ (ìµœì´ˆ 1íšŒ í•„ìˆ˜)
pnpm build
```

### í™˜ê²½ ë³€ìˆ˜

`apps/web/.env.local` íŒŒì¼ì— ë‹¤ìŒ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤:

| ë³€ìˆ˜ëª…                            | í•„ìˆ˜ | ì„¤ëª…                      |
| :-------------------------------- | :--- | :------------------------ |
| `NEXT_PUBLIC_SUPABASE_URL`        | O    | Supabase í”„ë¡œì íŠ¸ URL     |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY`   | O    | Supabase Anonymous Key    |
| `NEXT_PUBLIC_NAVER_MAP_CLIENT_ID` | O    | ë„¤ì´ë²„ ì§€ë„ API Client ID |

```bash
NEXT_PUBLIC_SUPABASE_URL="your-supabase-project-url"
NEXT_PUBLIC_SUPABASE_ANON_KEY="your-supabase-anon-key"
NEXT_PUBLIC_NAVER_MAP_CLIENT_ID="your-naver-map-client-id"
```

### ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
# ë£¨íŠ¸ì—ì„œ ì „ì²´ ì‹¤í–‰ (web + admin ë™ì‹œ)
pnpm dev

# ë˜ëŠ” webë§Œ ë‹¨ë… ì‹¤í–‰
pnpm --filter web dev
```

ê°œë°œ ì„œë²„: [http://localhost:3000](http://localhost:3000)

### í”„ë¡œë•ì…˜ ë¹Œë“œ

```bash
# ì „ì²´ ë¹Œë“œ (íŒ¨í‚¤ì§€ â†’ ì•± ìˆœì„œ ìë™ ë³´ì¥)
pnpm build

# webë§Œ ë‹¨ë… ë¹Œë“œ
pnpm --filter web build

# í”„ë¡œë•ì…˜ ì„œë²„ ì‹¤í–‰
pnpm --filter web start
```

### ë°°í¬ (Vercel)

Vercelì—ì„œ ëª¨ë…¸ë ˆí¬ í”„ë¡œì íŠ¸ë¡œ ì„¤ì • ì‹œ:

| ì„¤ì •             | ê°’                                          |
| :--------------- | :------------------------------------------ |
| Root Directory   | `/` (ë£¨íŠ¸)                                  |
| Build Command    | `cd ../.. && pnpm turbo build --filter=web` |
| Output Directory | `apps/web/.next`                            |
| Install Command  | `pnpm install`                              |

**Vercel í™˜ê²½ ë³€ìˆ˜:**

| ë³€ìˆ˜ëª…                            | í•„ìˆ˜ | ì„¤ëª…                      |
| :-------------------------------- | :--- | :------------------------ |
| `NEXT_PUBLIC_SUPABASE_URL`        | O    | Supabase í”„ë¡œì íŠ¸ URL     |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY`   | O    | Supabase Anonymous Key    |
| `NEXT_PUBLIC_NAVER_MAP_CLIENT_ID` | O    | ë„¤ì´ë²„ ì§€ë„ API Client ID |
| `SENTRY_AUTH_TOKEN`               | O    | Sentry ì†ŒìŠ¤ë§µ ì—…ë¡œë“œ í† í° |
